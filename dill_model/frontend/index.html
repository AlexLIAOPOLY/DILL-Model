<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="title">多模型光刻胶计算工具</title>
    <!-- 引入Google字体 -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- 引入Font Awesome图标库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- 备用Font Awesome CDN -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.1/css/all.css" crossorigin="anonymous" />
    <!-- 引入样式文件 -->
    <link rel="stylesheet" href="css/style.css?v=1.2">
    <link rel="stylesheet" href="css/animations.css?v=1.1">
    <link rel="stylesheet" href="css/popup-enhanced.css?v=1.0">
    <link rel="stylesheet" href="css/car-model.css?v=1.1">
    <link rel="stylesheet" href="css/loading-animation.css">
    <link rel="stylesheet" href="css/theme-colors.css?v=1.0">
    <link rel="stylesheet" href="css/professional-header-footer.css?v=1.1">
    <link rel="stylesheet" href="css/animation-controls.css?v=2.0">
    <!-- 添加数学公式所需的样式 -->
    <style>
        /* 隐藏浏览器默认的网络状态指示器和进度条 */
        body {
            position: relative !important;
        }
        
        /* 防止Chrome等浏览器的红色网络状态条 */
        body::before,
        html::before,
        *::before {
            content: none !important;
        }
        
        /* 强制隐藏页面顶部的任何红色条 */
        body > *:first-child::before {
            display: none !important;
        }
        
        /* 分数样式 */
        .fraction {
            display: inline-block;
            vertical-align: middle;
            text-align: center;
            margin: 0 4px;
            font-size: 1.05em;
        }
        
        .numerator, .denominator {
            display: block;
            padding: 0 4px;
        }
        
        .numerator {
            border-bottom: 1.5px solid black;
            margin-bottom: 1px;
            padding-bottom: 1px;
        }
        
        /* 确保数学符号与文本间距适宜 */
        code sup, code sub {
            font-size: 75%;
            line-height: 0;
            position: relative;
        }
        
        code sup {
            top: -0.5em;
        }
        
        code sub {
            bottom: -0.25em;
        }
        
        /* 美化数学公式样式 */
        code {
            font-family: "Times New Roman", serif;
            font-size: 1.05em;
            white-space: nowrap;
            letter-spacing: 0.3px;
        }
        
        /* 相位表达式选择器样式 */
        .phi-expr-container {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .phi-expr-select {
            padding: 6px 8px;
            border-radius: 4px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
            width: 100%;
            font-size: 0.9em;
            cursor: pointer;
        }
        
        .phi-expr-input {
            padding: 6px 8px;
            border-radius: 4px;
            border: 1px solid #ccc;
            width: 100%;
            font-size: 0.95em;
        }
        
        .phi-expr-select:focus,
        .phi-expr-input:focus {
            border-color: var(--accent-color, #3498db);
            outline: none;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }

        /* 主题特定颜色 */
        .theme-dill .phi-expr-select:focus,
        .theme-dill .phi-expr-input:focus {
            border-color: var(--dill-accent-color);
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .theme-enhanced-dill .phi-expr-select:focus,
        .theme-enhanced-dill .phi-expr-input:focus {
            border-color: var(--enhanced-dill-accent-color);
            box-shadow: 0 0 0 2px rgba(155, 89, 182, 0.2);
        }
        
        .theme-car .phi-expr-select:focus,
        .theme-car .phi-expr-input:focus {
            border-color: var(--car-accent-color);
            box-shadow: 0 0 0 2px rgba(230, 126, 34, 0.2);
        }
    </style>
    <!-- 引入Plotly.js -->
<script src="https://cdn.plot.ly/plotly-2.25.2.min.js"></script>
<!-- 引入Excel文件解析库 -->
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <!-- 移除旧的Font Awesome引用，已在头部添加最新版本 -->
    
    <!-- 引入系统化日志管理 -->
    <script src="js/systematic-logs.js?v=1.0"></script>
    
    <!-- 引入多段曝光时间累积模式 -->
    <script src="js/cumulative-exposure.js?v=1.0"></script>
    
    <!-- 添加的CSS样式 -->
    <style>
        /* 文件管理工具栏样式 */
        .example-files-toolbar {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        .toolbar-btn {
            background-color: #4a90e2;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            margin-right: 10px;
            transition: background-color 0.2s;
        }
        
        .toolbar-btn i {
            margin-right: 6px;
        }
        
        .toolbar-btn:hover {
            background-color: #3a7bc8;
        }
        
        .create-btn {
            background-color: #5cb85c;
        }
        
        .create-btn:hover {
            background-color: #4cae4c;
        }
        
        .file-search {
            flex-grow: 1;
            position: relative;
        }
        
        .search-input {
            width: 100%;
            padding: 8px 15px 8px 35px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #aaa;
        }
        
        /* 创建文件表单样式 */
        .create-file-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            font-weight: 600;
            margin-bottom: 5px;
            color: #444;
        }
        
        .form-input,
        .form-select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .form-select {
            background-color: white;
        }
        
        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 10px;
        }
        
        /* 文件项样式优化 */
        .file-item {
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            transition: all 0.2s ease;
        }
        
        .file-item:hover {
            box-shadow: 0 3px 8px rgba(0,0,0,0.15);
            transform: translateY(-1px);
        }
        
        .file-name {
            font-weight: 600;
            color: #333;
        }
        
        .file-meta {
            color: #777;
        }
        
        .file-actions {
            display: flex;
            align-items: center;
        }
        
        .file-action-btn {
            border: none;
            background: none;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 4px;
            transition: all 0.2s;
            font-size: 14px;
            display: flex;
            align-items: center;
        }
        
        .file-action-btn i {
            margin-right: 4px;
        }
        
        .preview-btn {
            color: #4a90e2;
        }
        
        .preview-btn:hover {
            background-color: rgba(74, 144, 226, 0.1);
        }
        
        .use-btn {
            color: #5cb85c;
        }
        
        .use-btn:hover {
            background-color: rgba(92, 184, 92, 0.1);
        }
        
        .delete-btn {
            color: white;
            background-color: #d9534f;
            padding: 8px 12px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            margin-left: 8px;
        }
        
        .delete-btn i {
            margin-right: 4px;
        }
        
        .delete-btn:hover {
            background-color: #c9302c;
        }
        
        /* 确认对话框样式 */
        .confirm-dialog-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 99999;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .confirm-dialog {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            width: 400px;
            max-width: 90%;
            overflow: hidden;
            animation: dialog-pop 0.3s ease-out;
        }
        
        @keyframes dialog-pop {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .confirm-dialog-header {
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
        }
        
        .confirm-dialog-header h3 {
            margin: 0;
            font-size: 18px;
            color: #333;
        }
        
        .confirm-dialog-body {
            padding: 20px;
        }
        
        .confirm-dialog-body p {
            margin: 0;
            color: #555;
        }
        
        .confirm-dialog-footer {
            padding: 15px 20px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        .confirm-dialog-btn {
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .cancel-btn {
            background-color: #f8f9fa;
            color: #333;
        }
        
        .cancel-btn:hover {
            background-color: #e9ecef;
        }
        
        .confirm-btn {
            color: white;
        }
        
        .confirm-primary {
            background-color: #4a90e2;
        }
        
        .confirm-primary:hover {
            background-color: #3a7bc8;
        }
        
        .confirm-danger {
            background-color: #d9534f;
        }
        
        .confirm-danger:hover {
            background-color: #c9302c;
        }
        
        /* 模态框样式优化 */
        .example-files-modal,
        .file-preview-modal,
        #create-file-modal {
            background-color: rgba(0, 0, 0, 0.6);
            -webkit-backdrop-filter: blur(2px);
            backdrop-filter: blur(2px);
        }
        
        .example-files-modal-content,
        .file-preview-modal-content,
        .create-file-modal-content {
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            animation: modal-fade-in 0.3s ease-out;
        }
        
        @keyframes modal-fade-in {
            0% { transform: translateY(20px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }
        
        .example-files-header,
        .file-preview-header {
            background-color: #6c7ae0;
            padding: 15px 20px;
            color: white;
        }
        
        .example-files-header h3,
        .file-preview-header h3 {
            font-size: 18px;
            margin: 0;
        }
        
        .example-files-body,
        .file-preview-body {
            padding: 20px;
        }
        
        .example-files-close,
        .file-preview-close,
        .create-file-close {
            background: none;
            border: none;
            font-size: 24px;
            color: white;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.2s;
        }
        
        .example-files-close:hover,
        .file-preview-close:hover,
        .create-file-close:hover {
            opacity: 1;
        }
        
        /* 文件内容编辑器 */
        .file-content-editor {
            width: 100%;
            height: 500px;
            font-family: monospace;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            resize: vertical;
            font-size: 14px;
            line-height: 1.5;
        }
        
        /* 创建新文件对话框中的文本框保持原始高度 */
        #new-file-content.file-content-editor {
            height: 200px;
        }
        
        /* 通知样式 */
        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            width: 300px;
            max-width: 100%;
        }
        
        .notification {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 12px 15px;
            margin-bottom: 10px;
            opacity: 0;
            transform: translateX(20px);
            animation: notification-slide-in 0.3s forwards;
            display: flex;
            align-items: center;
        }
        
        @keyframes notification-slide-in {
            to { opacity: 1; transform: translateX(0); }
        }
        
        .notification-hide {
            animation: notification-slide-out 0.3s forwards;
        }
        
        @keyframes notification-slide-out {
            to { opacity: 0; transform: translateX(20px); }
        }
        
        .notification-icon {
            margin-right: 10px;
            font-size: 16px;
        }
        
        .notification-success .notification-icon {
            color: #5cb85c;
        }
        
        .notification-error .notification-icon {
            color: #d9534f;
        }
        
        .notification-warning .notification-icon {
            color: #f0ad4e;
        }
        
        .notification-info .notification-icon {
            color: #5bc0de;
        }
        
        .notification-message {
            flex-grow: 1;
            font-size: 14px;
        }
        
        .notification-close {
            color: #aaa;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            padding: 0;
            margin-left: 10px;
        }
    </style>
    
    <title>DILL模型 - 光刻胶光化学反应模拟</title>
</head>
<body>
    <!-- 加载动画 -->
    <div id="loading" class="loading">
        <!-- 加载页面右上角日志按钮 -->
        <div class="loading-controls">
            <button id="loading-logs-btn" class="loading-logs-btn" title="查看计算进度" data-i18n-title="loading_logs_title">
                <i class="fas fa-file-alt"></i>
                <span class="loading-logs-text" data-i18n="loading_logs">计算日志</span>
            </button>
        </div>
        
        <!-- 加载期间的日志显示面板 -->
        <div id="loading-logs-panel" class="loading-logs-panel">
            <div class="loading-logs-header">
                <h4 class="loading-logs-title">
                    <i class="fas fa-code"></i>
                    <span data-i18n="loading_logs_title_text">实时计算日志</span>
                </h4>
                <div class="loading-logs-controls">
                    <button id="loading-logs-minimize" class="loading-logs-control-btn" title="最小化">
                        <i class="fas fa-minus"></i>
                    </button>
                    <button id="loading-logs-close" class="loading-logs-control-btn" title="关闭">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="loading-logs-content">
                <div class="loading-logs-stats">
                    <div class="loading-stat">
                        <span class="stat-label" data-i18n="loading_stat_progress">进度:</span>
                        <span id="loading-progress-text" class="stat-value">等待开始...</span>
                    </div>
                    <div class="loading-stat">
                        <span class="stat-label" data-i18n="loading_stat_time">用时:</span>
                        <span id="loading-time-text" class="stat-value">-</span>
                    </div>
                </div>
                <div id="loading-logs-container" class="loading-logs-list">
                    <div class="loading-logs-placeholder">
                        <i class="fas fa-info-circle"></i>
                        <span data-i18n="loading_logs_placeholder">计算开始后将显示详细日志...</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="loader-container">
            <!-- 多层旋转环 -->
            <div class="spinner-ring"></div>
            <div class="spinner-ring"></div>
            <div class="spinner-ring"></div>
            
            <!-- 中心圆点 -->
            <div class="spinner-core"></div>
            
            <!-- 波浪效果 -->
            <div class="wave"></div>
            <div class="wave"></div>
            <div class="wave"></div>
            
            <!-- 粒子效果 -->
            <div class="particles">
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
            </div>
            
            <!-- 分子路径 -->
            <div class="molecule-path">
                <div class="path"><div class="molecule"></div></div>
                <div class="path"><div class="molecule"></div></div>
                <div class="path"><div class="molecule"></div></div>
                <div class="path"><div class="molecule"></div></div>
            </div>
        </div>
        <div class="loading-text" data-i18n="loading">加载中...</div>
    </div>
    
    <!-- 页头 -->
    <header class="professional-header">
        <div class="header-main">
            <div class="header-content">
                <div class="brand-section">
                    <!-- 添加新的动态LOGO -->
                    <div class="dynamic-logo-container">
                        <div class="dynamic-logo">
                            <div class="dynamic-logo-circle"></div>
                            <div class="dynamic-logo-ring"></div>
                            <div class="dynamic-logo-orbit orbit-1">
                                <div class="dynamic-logo-particle particle-1"></div>
                            </div>
                            <div class="dynamic-logo-orbit orbit-2">
                                <div class="dynamic-logo-particle particle-2"></div>
                            </div>
                            <!-- 第三个轨道由CSS ::after伪元素创建 -->
                            <div class="dynamic-logo-particle particle-3"></div>
                        </div>
                    </div>
                    <div class="logo-container">
                        <div class="logo-text">
                            <div class="logo-title" data-i18n="logo_title">
                                <span class="logo-highlight">多模型</span>光刻胶计算平台
                            </div>
                            <div class="logo-subtitle" data-i18n="logo_subtitle">Multi-Model Photoresist Simulation Platform</div>
                        </div>
                    </div>
                </div>
                <nav class="main-nav">
                    <ul class="nav-menu">
                        <li class="nav-item active">
                            <a href="index.html" class="nav-link" data-i18n="nav_single">
                                <i class="fas fa-calculator"></i>
                                <span>单一计算</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="compare.html" class="nav-link" data-i18n="nav_compare">
                                <i class="fas fa-chart-line"></i>
                                <span>参数比较</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="../matrix_visualization/" class="nav-link" data-i18n="nav_matrix">
                                <i class="fas fa-cube"></i>
                                <span>模型矩阵可视化</span>
                            </a>
                        </li>
                    </ul>
                </nav>
                <div class="header-utilities">
                    <div class="lang-switcher">
                        <select id="lang-select" class="lang-select" title="选择语言 / Select Language" aria-label="选择语言">
                            <option value="zh-CN">中文</option>
                            <option value="en">English</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- 主要内容 -->
    <main class="main-content">
        <div class="container">
            <!-- 全新的错误框系统 - 位于页眉下方，模型选择区域上方 -->
            <div id="top-error-notification" class="error-notification">
                <div class="error-notification-content">
                    <div class="error-notification-icon">⚠　</div>
                    <div class="error-notification-message" id="top-error-message-text"></div>
                    <button class="error-notification-close" onclick="hideTopError()">&times;</button>
                </div>
            </div>
            
            <!-- 旧的错误消息（保留但隐藏，避免影响现有逻辑） -->
            <div id="error-message" class="error-message" data-i18n="error_message" style="display: none !important;"></div>

            <!-- 模型选择与公式展示区域 -->
            <section id="model-selection-section" class="model-selection-section">
                <h2 class="section-title">模型选择与说明</h2>
                <div class="model-selector-container">
                    <label for="model-select" class="model-select-label" data-i18n="select_model">选择计算模型:</label>
                    <select id="model-select" class="model-select">
                        <option value="dill" selected data-i18n="dill_model">Dill模型（薄胶）</option>
                        <option value="enhanced_dill" data-i18n="enhanced_dill_model">增强Dill模型（厚胶）</option>
                        <option value="car" data-i18n="car_model">CAR模型（化学放大型光刻胶）</option>
                    </select>
                </div>

                <div id="model-description-container" class="model-description-container">
                    <div id="dill-desc" class="model-card" style="display:block;">
                        <h3 class="model-description-title">
                            <i class="fas fa-microscope"></i>
                            <span data-i18n="dill_formula_title">Dill模型</span>
                        </h3>
                        <div class="model-core-formula" data-i18n="dill_formula_core">核心关系: <code>M(x,z) = e<sup>-C · D(x,z)</sup></code></div>
                        <p class="formula-notation" data-i18n="dill_formula_note"><em>M: 归一化光敏剂浓度, C: 光敏速率常数, D: 曝光剂量</em></p>
                        <div class="model-math"></div>
                        <div class="model-ref"></div>
                        <button id="dill-toggle-details" class="toggle-details-btn" data-i18n="btn_expand">展开更多 <i class="fas fa-chevron-down"></i></button>
                        <div id="dill-full-details" class="model-full-details">
                            <h4 data-i18n="dill_formula_ode">微分方程</h4>
                            <code style="display:block;margin-bottom:10px;" data-i18n="dill_formula_ode_code">
                                <div class="fraction">
                                    <span class="numerator">∂M</span>
                                    <span class="denominator">∂t</span>
                                </div>
                                 = -C · I · M
                            </code>
                            <div style="color:#34495e;font-size:0.98rem;margin-bottom:12px;" data-i18n="dill_formula_ref">参考：Dill F H, Neureuther A R, Tuttle J A, et al. IEEE Trans Electron Devices, 1975.</div>
                            <h4 data-i18n="dill_formula_scope">Dill模型主要适用于薄胶层（< 3μm）的光刻胶曝光过程建模，其中光的穿透性较好，光强分布较为均匀。</h4>
                            <h4 data-i18n="dill_formula_math">完整的Dill模型包括三个关键参数A、B、C：</h4>
                            <ul>
                                <li data-i18n="dill_formula_math_A"><b>参数A</b>：表示光敏剂对光的吸收率</li>
                                <li data-i18n="dill_formula_math_B"><b>参数B</b>：表示基底对光的吸收率</li>
                                <li data-i18n="dill_formula_math_C"><b>参数C</b>：表示光敏剂对光的反应速率</li>
                            </ul>
                            <p data-i18n="dill_formula_simple">在本工具的简化模型中，主要使用参数C来表征光刻胶的曝光特性。</p>
                            <h4 data-i18n="dill_formula_detail">核心公式详解</h4>
                            <div class="formula-details-card inner-formula-card">
                                <div class="formula-card-body">
                                    <div class="formula-large" data-i18n="dill_formula_core"><code>M(x,z) = e<sup>-C · D(x,z)</sup></code></div>
                                    <div class="formula-description">
                                        <div class="formula-param" data-i18n="dill_formula_param_M"><span class="param-name">M(x,z):</span> <span class="param-desc">位置(x,z)处的归一化光敏剂浓度，M=1表示未曝光区域，M=0表示完全曝光区域</span></div>
                                        <div class="formula-param" data-i18n="dill_formula_param_C"><span class="param-name">C:</span> <span class="param-desc">光敏速率常数，表示光刻胶对光的敏感程度，单位: cm²/mJ</span></div>
                                        <div class="formula-param" data-i18n="dill_formula_param_D"><span class="param-name">D(x,z):</span> <span class="param-desc">位置(x,z)处的曝光剂量，单位: mJ/cm²</span></div>
                                    </div>
                                    <div class="formula-derivation">
                                        <h4 data-i18n="dill_formula_ode2">微分方程形式</h4>
                                        <code data-i18n="dill_formula_ode2_code">∂M/∂t = -C · I · M</code>
                                        <p data-i18n="dill_formula_ode2_note">其中I为光强度，表示单位时间内的曝光剂量。</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="enhanced-dill-desc" class="model-card" style="display:none;">
                        <h3 class="model-description-title">
                            <i class="fas fa-layer-group"></i>
                            <span data-i18n="enhanced_formula_title">增强Dill模型（厚胶）</span>
                        </h3>
                        <div class="model-core-formula" data-i18n="enhanced_formula_core">核心关系: <code>
                            <div class="fraction">
                                <span class="numerator">∂I</span>
                                <span class="denominator">∂z</span>
                            </div>
                            = -I · [A(z<sub>h</sub>,T,t<sub>B</sub>) · M + B(z<sub>h</sub>,T,t<sub>B</sub>)]
                        </code></div>
                        <p class="formula-notation" data-i18n="enhanced_formula_note"><em>A: 光敏剂吸收率, B: 基底吸收率, M: 归一化光敏剂浓度</em></p>
                        <div class="model-math"></div>
                        <div class="model-ref"></div>
                        <button id="enhanced-dill-toggle-details" class="toggle-details-btn" data-i18n="btn_expand">展开更多 <i class="fas fa-chevron-down"></i></button>
                        <div id="enhanced-dill-full-details" class="model-full-details">
                            <h4 data-i18n="enhanced_formula_ode">微分方程</h4>
                            <code style="display:block;margin-bottom:10px;" data-i18n="enhanced_formula_ode_code">
                                <div class="fraction">
                                    <span class="numerator">∂I</span>
                                    <span class="denominator">∂z</span>
                                </div>
                                = -I · [A(z<sub>h</sub>,T,t<sub>B</sub>) · M + B(z<sub>h</sub>,T,t<sub>B</sub>)]<br>
                                <div class="fraction">
                                    <span class="numerator">∂M</span>
                                    <span class="denominator">∂t</span>
                                </div>
                                = -I · M · C(z<sub>h</sub>,T,t<sub>B</sub>)
                            </code>
                            <div style="color:#34495e;font-size:0.98rem;margin-bottom:12px;" data-i18n="enhanced_formula_ref">参考：刘世杰等《厚层抗蚀剂曝光模型及其参数测量》, 2005.</div>
                            <h4 data-i18n="enhanced_formula_scope">该模型特别适用于厚胶层（> 5μm）光刻胶，其中光的穿透性受到明显影响，光强随深度衰减较为显著。</h4>
                            <h4 data-i18n="enhanced_formula_fit">参数拟合</h4>
                            <p data-i18n="enhanced_formula_fit_math">根据刘世杰等的研究，A/B/C参数可以通过以下形式表示：</p>
                            <ul>
                                <li data-i18n="enhanced_formula_fit_A">A(z<sub>h</sub>,T,t<sub>B</sub>) = a<sub>0</sub> + a<sub>1</sub> · z<sub>h</sub> + a<sub>2</sub> · T + a<sub>3</sub> · z<sub>h</sub><sup>2</sup> + a<sub>4</sub> · z<sub>h</sub> · T + a<sub>5</sub> · T<sup>2</sup></li>
                                <li data-i18n="enhanced_formula_fit_B">B(z<sub>h</sub>,T,t<sub>B</sub>) = b<sub>0</sub> + b<sub>1</sub> · z<sub>h</sub> + b<sub>2</sub> · T</li>
                                <li data-i18n="enhanced_formula_fit_C">C(z<sub>h</sub>,T,t<sub>B</sub>) = c<sub>0</sub> + c<sub>1</sub> · z<sub>h</sub> + c<sub>2</sub> · T + c<sub>3</sub> · z<sub>h</sub><sup>2</sup></li>
                            </ul>
                            <p data-i18n="enhanced_formula_fit_note">其中参数a₀~a₅, b₀~b₂, c₀~c₃由实验数据拟合得到。</p>
                            <h4 data-i18n="enhanced_formula_detail">核心公式详解</h4>
                            <div class="formula-details-card inner-formula-card">
                                <div class="formula-card-body">
                                    <div class="formula-large" data-i18n="enhanced_formula_core">
                                        <code>
                                            <div class="fraction">
                                                <span class="numerator">∂I</span>
                                                <span class="denominator">∂z</span>
                                            </div>
                                            = -I · [A(z<sub>h</sub>,T,t<sub>B</sub>) · M + B(z<sub>h</sub>,T,t<sub>B</sub>)]
                                        </code>
                                    </div>
                                    <div class="formula-large" data-i18n="enhanced_formula_core2">
                                        <code>
                                            <div class="fraction">
                                                <span class="numerator">∂M</span>
                                                <span class="denominator">∂t</span>
                                            </div>
                                            = -I · M · C(z<sub>h</sub>,T,t<sub>B</sub>)
                                        </code>
                                    </div>
                                    <div class="formula-description">
                                        <div class="formula-param" data-i18n="enhanced_formula_param_I"><span class="param-name">I:</span> <span class="param-desc">光强度，随深度z变化</span></div>
                                        <div class="formula-param" data-i18n="enhanced_formula_param_M"><span class="param-name">M:</span> <span class="param-desc">归一化光敏剂浓度</span></div>
                                        <div class="formula-param" data-i18n="enhanced_formula_param_A"><span class="param-name">A(z<sub>h</sub>,T,t<sub>B</sub>):</span> <span class="param-desc">光敏剂吸收率，与胶厚、前烘温度、前烘时间相关</span></div>
                                        <div class="formula-param" data-i18n="enhanced_formula_param_B"><span class="param-name">B(z<sub>h</sub>,T,t<sub>B</sub>):</span> <span class="param-desc">基底吸收率，与胶厚、前烘温度、前烘时间相关</span></div>
                                        <div class="formula-param" data-i18n="enhanced_formula_param_C"><span class="param-name">C(z<sub>h</sub>,T,t<sub>B</sub>):</span> <span class="param-desc">光敏速率常数，与胶厚、前烘温度、前烘时间相关</span></div>
                                    </div>
                                    <div class="formula-derivation">
                                        <h4 data-i18n="enhanced_formula_fit_detail">参数拟合公式</h4>
                                        <p data-i18n="enhanced_formula_fit_desc">A、B、C参数通过多项式函数拟合实验数据：</p>
                                        <code data-i18n="enhanced_formula_fit_A">A(z<sub>h</sub>,T,t<sub>B</sub>) = a<sub>0</sub> + a<sub>1</sub> · z<sub>h</sub> + a<sub>2</sub> · T + a<sub>3</sub> · z<sub>h</sub><sup>2</sup> + a<sub>4</sub> · z<sub>h</sub> · T + a<sub>5</sub> · T<sup>2</sup></code><br>
                                        <code data-i18n="enhanced_formula_fit_B">B(z<sub>h</sub>,T,t<sub>B</sub>) = b<sub>0</sub> + b<sub>1</sub> · z<sub>h</sub> + b<sub>2</sub> · T</code><br>
                                        <code data-i18n="enhanced_formula_fit_C">C(z<sub>h</sub>,T,t<sub>B</sub>) = c<sub>0</sub> + c<sub>1</sub> · z<sub>h</sub> + c<sub>2</sub> · T + c<sub>3</sub> · z<sub>h</sub><sup>2</sup></code>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="car-desc" class="model-card" style="display:none;">
                        <h3 class="model-description-title">
                            <i class="fas fa-flask"></i>
                            <span data-i18n="car_formula_title">CAR模型（化学放大型光刻胶）</span>
                        </h3>
                        <div class="model-core-formula" data-i18n="car_formula_core">核心关系: <code>[H<sup>+</sup>] = η · D(x)</code></div>
                        <p class="formula-notation" data-i18n="car_formula_note"><em>η: 光酸产生效率, D: 曝光剂量, [H<sup>+</sup>]: 光酸浓度</em></p>
                        <div class="model-math"></div>
                        <div class="model-ref"></div>
                        <button id="car-toggle-details" class="toggle-details-btn" data-i18n="btn_expand">展开更多 <i class="fas fa-chevron-down"></i></button>
                        <div id="car-full-details" class="model-full-details">
                            <h4 data-i18n="car_formula_ode">关键方程</h4>
                            <code style="display:block;margin-bottom:10px;" data-i18n="car_formula_ode_code">[H<sup>+</sup>] = η · D(x)<br>D(x,t) = I(x) · t<br>扩散: [H<sup>+</sup>]<sub>diff</sub> = G([H<sup>+</sup>], l<sub>diff</sub>)<br>脱保护度: M = 1 - e<sup>-k · [H<sup>+</sup>]<sub>diff</sub> · A</sup></code>
                            <div style="color:#34495e;font-size:0.98rem;margin-bottom:12px;" data-i18n="car_formula_ref">参考：Hinsberg et al., "Chemical amplification mechanism", Proc. SPIE, 1994.</div>
                            <h4 data-i18n="car_formula_scope">该模型特别适用于DUV (深紫外)光刻胶，其中一个光子可以通过光酸催化机制引发多次化学反应。</h4>
                            <h4 data-i18n="car_formula_math">CAR模型的四个关键步骤：</h4>
                            <ul>
                                <li data-i18n="car_formula_math_A"><b>光酸生成</b>：曝光产生初始光酸分布，与曝光剂量和量子效率有关</li>
                                <li data-i18n="car_formula_math_B"><b>光酸扩散</b>：后烘过程中光酸分子扩散，使空间分布变得平滑</li>
                                <li data-i18n="car_formula_math_C"><b>催化反应</b>：每个光酸分子可催化多个保护基团脱离，实现化学放大</li>
                                <li data-i18n="car_formula_math_D"><b>显影过程</b>：脱保护区域可被显影液溶解，形成图案</li>
                            </ul>
                            <p data-i18n="car_formula_simple">本模型关注放大效应、对比度和分辨率之间的关系。</p>
                            <h4 data-i18n="car_formula_detail">核心公式详解</h4>
                            <div class="formula-details-card inner-formula-card">
                                <div class="formula-card-body">
                                    <div class="formula-large" data-i18n="car_formula_acid"><code>[H<sup>+</sup>] = η · D(x) = η · I(x) · t<sub>exp</sub></code></div>
                                    <div class="formula-large" data-i18n="car_formula_deprotect"><code>M = 1 - e<sup>-k · [H<sup>+</sup>]<sub>diff</sub> · A</sup></code></div>
                                    <div class="formula-description">
                                        <div class="formula-param" data-i18n="car_formula_param_H"><span class="param-name">[H<sup>+</sup>]:</span> <span class="param-desc">光酸浓度，与曝光剂量成正比</span></div>
                                        <div class="formula-param" data-i18n="car_formula_param_eta"><span class="param-name">η:</span> <span class="param-desc">光酸产生效率，反映光子到光酸分子的转化效率</span></div>
                                        <div class="formula-param" data-i18n="car_formula_param_diff"><span class="param-name">[H<sup>+</sup>]<sub>diff:</span> <span class="param-desc">经过扩散后的光酸浓度分布</span></div>
                                        <div class="formula-param" data-i18n="car_formula_param_k"><span class="param-name">k:</span> <span class="param-desc">反应速率常数，表征催化反应效率</span></div>
                                        <div class="formula-param" data-i18n="car_formula_param_A"><span class="param-name">A:</span> <span class="param-desc">放大因子，表示每个光酸分子可以催化的反应数量</span></div>
                                        <div class="formula-param" data-i18n="car_formula_param_M"><span class="param-name">M:</span> <span class="param-desc">树脂脱保护程度，影响显影后的溶解速率</span></div>
                                    </div>
                                    <div class="formula-derivation">
                                        <h4 data-i18n="car_formula_steps">CAR模型步骤方程</h4>
                                        <p data-i18n="car_formula_steps_desc">CAR模型的完整反应过程可表示为：</p>
                                        <code data-i18n="car_formula_steps_1">1. [H<sup>+</sup>] = η · D(x) = η · I(x) · t<sub>exp</sub></code><br>
                                        <code data-i18n="car_formula_steps_2">2. [H<sup>+</sup>]<sub>diff</sub> = G([H<sup>+</sup>], l<sub>diff</sub>)</code><br>
                                        <code data-i18n="car_formula_steps_3">3. M = 1 - e<sup>-k · [H<sup>+</sup>]<sub>diff</sub> · A</sup></code>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- 参数输入区域 -->
            <section class="parameters-section">
                <h2 class="section-title">参数设置</h2>
                
                <div id="dill-params" class="parameters-grid" style="display:block;">
                    <!-- Dill模型基本参数容器 -->
                    <div class="parameter-group-container" id="dill-basic-params-container" data-title="Dill模型基本参数" data-i18n-title="dill_basic_params">
                        <!-- 光强分布输入方式选择器 -->
                        <div class="parameter-item">
                            <div class="parameter-label">
                                <span class="parameter-name">光强分布输入方式</span>
                            </div>
                            <div class="parameter-input">
                                <select id="intensity_input_method" class="method-select" title="选择光强分布输入方式" aria-label="光强分布输入方式选择">
                                    <option value="formula">公式计算</option>
                                    <option value="custom">自定义向量</option>
                                </select>
                            </div>
                            <div class="parameter-description">选择光强分布的输入方式：公式计算（使用数学公式）或自定义向量（上传文件或手动输入）</div>
                        </div>

                        <!-- 自定义光强分布输入区域 -->
                        <div id="custom-intensity-container" class="custom-intensity-container" style="display:none;">
                            <!-- 输入方式选择标签页 -->
                            <div class="custom-input-tabs">
                                <button class="tab-button active" data-tab="file-upload">文件上传</button>
                                <button class="tab-button" data-tab="manual-input">手动输入</button>
                            </div>

                            <!-- 文件上传标签页 -->
                            <div id="file-upload-tab" class="tab-content active">
                                <div class="file-upload-area">
                                    <div class="upload-zone" id="intensity-upload-zone">
                                        <div class="upload-icon">
                                            <div class="custom-upload-icon">
                                                <div class="cloud-icon">
                                                    <div class="cloud-base"></div>
                                                    <div class="cloud-puff cloud-puff-1"></div>
                                                    <div class="cloud-puff cloud-puff-2"></div>
                                                    <div class="cloud-puff cloud-puff-3"></div>
                                                </div>
                                                <div class="upload-arrow">
                                                    <div class="arrow-body"></div>
                                                    <div class="arrow-head"></div>
                                                </div>
                                            </div>
                                        </div>
                                                                        <div class="upload-text">
                                    <div class="upload-title">拖拽文件到此处或点击选择</div>
                                    <div class="upload-subtitle">支持格式：TXT, CSV, JSON, DAT, XLS, XLSX, MAT, PLI, LDF, MSK</div>                                    
                                </div>
                                        <input type="file" id="intensity-file-input" accept=".txt,.csv,.json,.dat,.xls,.xlsx,.mat,.pli,.ldf,.msk,.int,.pro,.sim,.tab,.tsv,.asc,.lis,.log,.out,.fdt,.slf" style="display:none;">
                                    </div>
                                    
                                    <!-- 我的工作间按钮 -->
                                    <div class="example-files-section" style="margin-top: 15px; text-align: center;">
                                        <button id="example-files-btn" class="example-files-button" type="button">
                                            <i class="fas fa-folder-open"></i>
                                            我的工作间
                                        </button>
                                    </div>
                                    
                                    <!-- 添加单位选择下拉菜单 -->
                                    <div class="unit-selection" style="margin-top: 15px;">
                                        <label for="custom-data-unit" style="margin-right: 10px; font-weight: 500;">坐标单位:</label>
                                        <select id="custom-data-unit" class="form-control custom-select" style="width: auto; display: inline-block;">
                                            <option value="um">微米 (μm)</option>
                                            <option value="mm" selected>毫米 (mm)</option>
                                            <option value="nm">纳米 (nm)</option>
                                            <option value="custom">自定义</option>
                                        </select>
                                        <span class="help-icon" style="display: inline-flex; margin-left: 8px; color: #0277bd; cursor: help; font-size: 16px;" title="选择上传数据的坐标单位。系统会根据选择的单位进行适当的坐标转换，确保计算结果准确。选择'自定义'可以手动设置转换比例。"><i class="fas fa-info-circle"></i></span>
                                        <div id="custom-scale-container" style="display: none; margin-top: 10px;">
                                            <label for="custom-scale-factor" style="margin-right: 10px;">自定义缩放比例:</label>
                                            <input type="number" id="custom-scale-factor" class="form-control" style="width: 100px; display: inline-block;" value="1" min="0.000001" step="0.1">
                                            <span style="margin-left: 5px; color: #666;">(相对于毫米)</span>
                                            <span class="help-icon" style="display: inline-flex; margin-left: 8px; color: #0277bd; cursor: help; font-size: 16px;" title="设置自定义单位到毫米(mm)的转换比例。例如：微米到毫米的比例为0.001，纳米到毫米的比例为0.000001。"><i class="fas fa-info-circle"></i></span>
                                        </div>
                                    </div>
                                    
                                    <!-- 添加数据范围外光强选项 -->
                                    <div class="outside-range-setting" style="margin-top: 15px;">
                                        <label for="outside-range-mode-file" style="margin-right: 10px; font-weight: 500;">数据范围外光强:</label>
                                        <select id="outside-range-mode-file" class="form-control custom-select" style="width: auto; display: inline-block;">
                                            <option value="zero" selected>零</option>
                                            <option value="boundary">与边界值相同</option>
                                            <option value="custom">自定义值</option>
                                        </select>
                                        <span class="help-icon" style="display: inline-flex; margin-left: 8px; color: #0277bd; cursor: help; font-size: 16px;" title="设置X坐标范围外区域的光强值。默认为0，也可选择与边界值相同或自定义值。"><i class="fas fa-info-circle"></i></span>
                                        <div id="custom-intensity-value-file-container" style="display: none; margin-top: 10px;">
                                            <label for="custom-intensity-value-file" style="margin-right: 10px;">自定义光强值:</label>
                                            <input type="number" id="custom-intensity-value-file" class="form-control" style="width: 100px; display: inline-block;" value="0" min="0" step="0.1">
                                            <span style="margin-left: 5px; color: #666;">(mW/cm²)</span>
                                        </div>
                                    </div>
                                                                <div class="file-format-help">
                                <details>
                                    <summary>支持的文件格式说明</summary>
                                    <div class="format-examples">
                                        <div class="format-item">
                                            <strong>TXT格式:</strong>
                                            <code>
x1 intensity1<br>
x2 intensity2<br>
或纯强度值（每行一个）
                                            </code>
                                        </div>
                                        <div class="format-item">
                                            <strong>CSV格式:</strong>
                                            <code>
x,intensity<br>
-1.0,0.5<br>
-0.9,0.52
                                            </code>
                                        </div>
                                        <div class="format-item">
                                            <strong>JSON格式:</strong>
                                            <code>
{"x": [-1.0, -0.9, ...], "intensity": [0.5, 0.52, ...]}
                                            </code>
                                        </div>
                                        <div class="format-item">
                                            <strong>DAT/TAB/TSV格式:</strong>
                                            <code>
# 支持带注释的数据文件<br>
# x intensity<br>
-1.0 0.5<br>
-0.9 0.52
                                            </code>
                                        </div>
                                        <div class="format-item">
                                            <strong>Excel格式 (XLS/XLSX):</strong>
                                            <code>
支持Excel表格，请确保数据在第一个工作表<br>
可包含标题行，如"Position"、"Intensity"等
                                            </code>
                                        </div>
                                        <div class="format-item">
                                            <strong>MATLAB格式 (MAT):</strong>
                                            <code>
支持包含x和intensity变量的MAT文件
                                            </code>
                                        </div>
                                        <div class="format-item">
                                            <strong>光刻仿真软件格式:</strong>
                                            <code>
PROLITH (.pli): 光刻模拟数据文件<br>
Lithography (.ldf): 光刻数据格式<br>
掩模文件 (.msk): 光刻掩模信息<br>
强度文件 (.int): 光强分布数据<br>
工艺文件 (.pro, .sim): 仿真工艺文件<br>
其他常见格式: .lis, .log, .out, .asc, .fdt, .slf 等
                                            </code>
                                        </div>
                                        <div class="format-item">
                                            <strong>通用规则:</strong>
                                            <code>
• 可以使用空格、制表符、逗号、分号等作为分隔符<br>
• 可以包含列标题行（如 "x intensity"）<br>
• 支持注释行（以 #、//、! 开头）<br>
• 通常第一列为位置(x)，第二列为光强值<br>
• 如果只有一列数据，将使用行号作为x坐标
                                            </code>
                                        </div>
                                    </div>
                                </details>
                            </div>
                                </div>
                            </div>

                            <!-- 手动输入标签页 -->
                            <div id="manual-input-tab" class="tab-content">
                                <div class="manual-input-area">
                                    <div class="input-method-selector">
                                        <label>
                                            <input type="radio" name="manual-method" value="coordinates" checked>
                                            坐标+强度对
                                        </label>
                                        <label>
                                            <input type="radio" name="manual-method" value="intensity-only">
                                            仅强度值
                                        </label>
                                    </div>
                                    
                                    <div id="coordinates-input" class="input-section">
                                        <label for="intensity-coords-textarea">坐标和强度值（格式：x intensity，每行一对）:</label>
                                        <textarea id="intensity-coords-textarea" placeholder="例如：&#10;-1.0 0.5&#10;-0.9 0.52&#10;-0.8 0.54&#10;..."></textarea>
                                    </div>
                                    
                                    <div id="intensity-only-input" class="input-section" style="display:none;">
                                        <div class="range-input-group">
                                            <label>X坐标范围:</label>
                                            <input type="number" id="x-range-min" placeholder="最小值" value="-1" step="0.1">
                                            <span>到</span>
                                            <input type="number" id="x-range-max" placeholder="最大值" value="1" step="0.1">
                                        </div>
                                        <label for="intensity-values-textarea">强度值（每行一个，按X坐标顺序）:</label>
                                        <textarea id="intensity-values-textarea" placeholder="例如：&#10;0.5&#10;0.52&#10;0.54&#10;..."></textarea>
                                    </div>
                                    
                                    <!-- 我的工作间按钮 -->
                                    <div class="example-files-section" style="margin-top: 15px; text-align: center;">
                                        <button id="example-files-btn-manual" class="example-files-button" type="button" onclick="openExampleFilesModal()">
                                            <i class="fas fa-folder-open"></i>
                                            我的工作间
                                        </button>
                                    </div>

                                    <!-- 添加单位选择区域 -->
                                    <div class="unit-selection" style="margin-top: 15px;">
            <label for="manual-data-unit" style="margin-right: 10px; font-weight: 500;">坐标单位:</label>
            <select id="manual-data-unit" class="form-control custom-select" style="width: auto; display: inline-block;">
                <option value="um">微米 (μm)</option>
                <option value="mm" selected>毫米 (mm)</option>
                <option value="nm">纳米 (nm)</option>
                <option value="custom">自定义</option>
            </select>
            <span class="help-icon" style="display: inline-flex; margin-left: 8px; color: #0277bd; cursor: help; font-size: 16px;" title="选择手动输入数据的坐标单位。系统会根据选择的单位进行适当的坐标转换，确保计算结果准确。选择'自定义'可以手动设置转换比例。"><i class="fas fa-info-circle"></i></span>
            <div id="manual-scale-container" style="display: none; margin-top: 10px;">
                <label for="manual-scale-factor" style="margin-right: 10px;">自定义缩放比例:</label>
                <input type="number" id="manual-scale-factor" class="form-control" style="width: 100px; display: inline-block;" value="1" min="0.000001" step="0.1">
                <span style="margin-left: 5px; color: #666;">(相对于毫米)</span>
                <span class="help-icon" style="display: inline-flex; margin-left: 8px; color: #0277bd; cursor: help; font-size: 16px;" title="设置自定义单位到毫米(mm)的转换比例。例如：微米到毫米的比例为0.001，纳米到毫米的比例为0.000001。"><i class="fas fa-info-circle"></i></span>
            </div>
        </div>
        
        <!-- 添加数据范围外光强选项 -->
        <div class="outside-range-setting" style="margin-top: 15px;">
            <label for="outside-range-mode-manual" style="margin-right: 10px; font-weight: 500;">数据范围外光强:</label>
            <select id="outside-range-mode-manual" class="form-control custom-select" style="width: auto; display: inline-block;">
                <option value="zero" selected>零</option>
                <option value="boundary">与边界值相同</option>
                <option value="custom">自定义值</option>
            </select>
            <span class="help-icon" style="display: inline-flex; margin-left: 8px; color: #0277bd; cursor: help; font-size: 16px;" title="设置X坐标范围外区域的光强值。默认为0，也可选择与边界值相同或自定义值。"><i class="fas fa-info-circle"></i></span>
            <div id="custom-intensity-value-manual-container" style="display: none; margin-top: 10px;">
                <label for="custom-intensity-value-manual" style="margin-right: 10px;">自定义光强值:</label>
                <input type="number" id="custom-intensity-value-manual" class="form-control" style="width: 100px; display: inline-block;" value="0" min="0" step="0.1">
                <span style="margin-left: 5px; color: #666;">(mW/cm²)</span>
            </div>
        </div>

                                    <!-- 手动输入格式帮助 -->
                                    <div class="file-format-help">
                                        <details>
                                            <summary>手动输入格式规范与说明</summary>
                                            <div class="format-examples">
                                                <div class="format-item">
                                                    <strong>坐标+强度对格式:</strong>
                                                    <code>
x1 intensity1
x2 intensity2
x3 intensity3
...

示例：
-1.0 0.5000
-0.9 0.5236
-0.8 0.5436
-0.7 0.5593
-0.6 0.5698</code>
                                                </div>
                                                <div class="format-item">
                                                    <strong>仅强度值格式:</strong>
                                                    <code>
intensity1
intensity2
intensity3
...

示例：
0.5000
0.5236
0.5436
0.5593
0.5698

注意：使用此格式需要设置X坐标范围，程序会自动分配坐标</code>
                                                </div>
                                                <div class="format-item">
                                                    <strong>数据要求:</strong>
                                                    <code>
• 数据精度：建议保留3-4位小数
• 数据范围：强度值通常在0-1之间
• 坐标范围：x坐标建议在[-5, 5]范围内
• 数据量：建议50-1000个数据点
• 格式要求：每行一个数据点或数据对</code>
                                                </div>
                                                <div class="format-item">
                                                    <strong>注意事项:</strong>
                                                    <code>
• 坐标+强度对：用空格或制表符分隔x和intensity
• 仅强度值：每行只包含一个强度数值
• 避免空行：数据中间不要留空行
• 数据顺序：建议按x坐标升序排列
• 特殊字符：避免使用逗号、分号等特殊分隔符</code>
                                                </div>
                                            </div>
                                        </details>
                                    </div>
                                    
                                    <div class="input-actions">
                                        <button id="preview-intensity-btn" class="blue-btn action-btn">
                                            <i class="fas fa-eye"></i> 预览数据
                                        </button>
                                        <button id="apply-intensity-btn" class="red-btn action-btn">
                                            <i class="fas fa-times"></i> 卸载数据
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- 数据状态显示 -->
                            <div id="intensity-data-status" class="data-status" style="display:none;">
                                <div class="status-header">
                                    <span class="status-title">已加载的光强数据</span>
                                    <button id="clear-intensity-data" class="clear-btn">
                                        <i class="fas fa-trash-alt"></i> 清除
                                    </button>
                                </div>
                                <div class="status-info">
                                    <div class="info-item">
                                        <span class="info-label">数据点数:</span>
                                        <span id="intensity-point-count">0</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">X范围:</span>
                                        <span id="intensity-x-range">-</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">强度范围:</span>
                                        <span id="intensity-value-range">-</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">范围外模式:</span>
                                        <span id="outside-range-mode" class="info-value mode-zero">范围外为零</span>
                                    </div>
                                </div>
                                <style>
                                    .mode-zero {
                                        color: #0066cc;
                                        background: #e6f2ff;
                                        padding: 2px 6px;
                                        border-radius: 4px;
                                        font-size: 0.9em;
                                    }
                                    .mode-boundary {
                                        color: #996600;
                                        background: #fff5e6;
                                        padding: 2px 6px;
                                        border-radius: 4px;
                                        font-size: 0.9em;
                                    }
                                    .mode-custom {
                                        color: #006600;
                                        background: #e6ffea;
                                        padding: 2px 6px;
                                        border-radius: 4px;
                                        font-size: 0.9em;
                                    }
                                
                                /* 文件分类标题样式 */
                                .file-category-header {
                                    -webkit-user-select: none;
                                    user-select: none;
                                    transition: all 0.3s ease;
                                }
                                
                                .file-category-header:hover {
                                    transform: translateX(2px);
                                    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                                }
                                
                                .file-item[data-category] {
                                    margin-left: 15px;
                                    border-left: 2px solid #f0f0f0;
                                    transition: all 0.2s ease;
                                }
                                
                                .file-item[data-category]:hover {
                                    border-left-color: #4a90e2;
                                    background-color: #f8f9ff;
                                }
                                
                                .file-category-header:first-child {
                                    margin-top: 0;
                                }
                                
                                /* 文件拖拽排序样式 */
                                .file-item {
                                    transition: transform 0.2s ease, box-shadow 0.2s ease;
                                    cursor: move;
                                }
                                
                                .file-item.dragging {
                                    opacity: 0.5;
                                    transform: rotate(5deg);
                                    z-index: 1000;
                                    box-shadow: 0 8px 25px rgba(0,0,0,0.3);
                                }
                                
                                .file-item.drag-over {
                                    border-top: 3px solid #4a90e2;
                                    background-color: #f0f7ff;
                                }
                                
                                .file-item.drag-forbidden {
                                    background-color: #ffebee;
                                    border: 2px dashed #f44336;
                                    cursor: not-allowed;
                                }
                                
                                .file-item .drag-handle {
                                    display: none;
                                    position: absolute;
                                    left: 5px;
                                    top: 50%;
                                    transform: translateY(-50%);
                                    color: #999;
                                    cursor: grab;
                                    padding: 5px;
                                }
                                
                                .file-item:hover .drag-handle {
                                    display: block;
                                }
                                
                                .file-item .drag-handle:active {
                                    cursor: grabbing;
                                }
                                
                                .drag-placeholder {
                                    height: 3px;
                                    background: linear-gradient(90deg, #4a90e2, #2196F3);
                                    border-radius: 2px;
                                    margin: 2px 0;
                                    opacity: 0.8;
                                    animation: pulse 1s infinite;
                                }
                                
                                @keyframes pulse {
                                    0%, 100% { opacity: 0.8; }
                                    50% { opacity: 0.4; }
                                }
                                
                                /* 文件管理区域布局修正 */
                                .example-files-body {
                                    overflow-y: auto;
                                    max-height: 600px;
                                }
                                
                                .example-files-list {
                                    overflow-y: auto;
                                    max-height: 500px;
                                }
                                
                                /* 工具栏布局优化 */
                                .example-files-toolbar {
                                    display: flex;
                                    justify-content: space-between;
                                    align-items: center;
                                    gap: 15px;
                                    position: relative;
                                    z-index: 10;
                                }
                                
                                .toolbar-left {
                                    display: flex;
                                    gap: 10px;
                                }
                                
                                .toolbar-right {
                                    flex: 1;
                                    display: flex;
                                    justify-content: flex-end;
                                }
                                
                                /* 搜索和筛选容器 */
                                .search-filter-container {
                                    position: relative;
                                    width: 100%;
                                    max-width: 400px;
                                    z-index: 10;
                                }
                                
                                .file-search {
                                    position: relative;
                                    width: 100%;
                                }
                                
                                .search-input {
                                    width: 100%;
                                    padding: 8px 45px 8px 40px;
                                    border: 1px solid #dee2e6;
                                    border-radius: 6px;
                                    font-size: 14px;
                                    transition: border-color 0.2s ease;
                                }
                                
                                .search-input:focus {
                                    outline: none;
                                    border-color: #4a90e2;
                                    box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.2);
                                }
                                
                                .search-icon {
                                    position: absolute;
                                    left: 12px;
                                    top: 50%;
                                    transform: translateY(-50%);
                                    color: #6c757d;
                                    font-size: 14px;
                                    pointer-events: none;
                                }
                                
                                /* 漏斗筛选按钮 */
                                .filter-funnel-container {
                                    position: absolute;
                                    right: 4px;
                                    top: 50%;
                                    transform: translateY(-50%);
                                    z-index: 10;
                                }
                                
                                .filter-funnel-btn {
                                    position: relative;
                                    background: rgba(255,255,255,0.9);
                                    border: 1px solid #e9ecef;
                                    padding: 6px;
                                    cursor: pointer;
                                    border-radius: 4px;
                                    color: #495057;
                                    font-size: 14px;
                                    transition: all 0.2s ease;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    width: 28px;
                                    height: 28px;
                                    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
                                }
                                
                                .filter-funnel-btn i {
                                    display: block;
                                    font-style: normal;
                                    font-variant: normal;
                                    text-rendering: auto;
                                    -webkit-font-smoothing: antialiased;
                                }
                                
                                /* CSS Fallback for filter icon if Font Awesome fails to load */
                                .filter-funnel-btn i::before {
                                    content: "\f0b0";
                                    font-family: "Font Awesome 6 Free";
                                    font-weight: 900;
                                }
                                
                                /* Backup fallback with Unicode symbol */
                                .filter-funnel-btn:not(.fa-loaded) i {
                                    font-family: Arial, sans-serif;
                                }
                                
                                .filter-funnel-btn:not(.fa-loaded) i::before {
                                    content: "⧨";
                                    font-size: 12px;
                                }
                                
                                .filter-funnel-btn:hover {
                                    background: #e9ecef;
                                    border-color: #adb5bd;
                                    color: #212529;
                                    transform: scale(1.05);
                                }
                                
                                .filter-funnel-btn.active {
                                    background: #4a90e2;
                                    border-color: #4a90e2;
                                    color: white;
                                    box-shadow: 0 2px 4px rgba(74, 144, 226, 0.3);
                                }
                                
                                .filter-count {
                                    background: #dc3545;
                                    color: white;
                                    border-radius: 10px;
                                    padding: 2px 5px;
                                    font-size: 10px;
                                    font-weight: 600;
                                    min-width: 14px;
                                    text-align: center;
                                    position: absolute;
                                    top: -4px;
                                    right: -4px;
                                    line-height: 1;
                                }
                                
                                .filter-dropdown {
                                    position: absolute;
                                    top: calc(100% + 8px);
                                    right: -8px;
                                    background: white;
                                    border: 1px solid #dee2e6;
                                    border-radius: 8px;
                                    box-shadow: 0 8px 30px rgba(0,0,0,0.2);
                                    min-width: 300px;
                                    max-height: 450px;
                                    overflow-y: auto;
                                    z-index: 9999;
                                    
                                    /* 添加三角形指针 */
                                }
                                
                                .filter-dropdown::before {
                                    content: '';
                                    position: absolute;
                                    top: -8px;
                                    right: 16px;
                                    width: 0;
                                    height: 0;
                                    border-left: 8px solid transparent;
                                    border-right: 8px solid transparent;
                                    border-bottom: 8px solid white;
                                    z-index: 10001;
                                }
                                
                                .filter-dropdown::after {
                                    content: '';
                                    position: absolute;
                                    top: -9px;
                                    right: 16px;
                                    width: 0;
                                    height: 0;
                                    border-left: 8px solid transparent;
                                    border-right: 8px solid transparent;
                                    border-bottom: 8px solid #dee2e6;
                                    z-index: 10000;
                                }
                                
                                .filter-section {
                                    border-bottom: 1px solid #f1f3f4;
                                    padding: 12px;
                                }
                                
                                .filter-section:last-child {
                                    border-bottom: none;
                                }
                                
                                .filter-header {
                                    display: flex;
                                    justify-content: space-between;
                                    align-items: center;
                                    margin-bottom: 8px;
                                    font-weight: 600;
                                    font-size: 13px;
                                    color: #333;
                                }
                                
                                .clear-filter {
                                    background: none;
                                    border: none;
                                    color: #4a90e2;
                                    cursor: pointer;
                                    font-size: 12px;
                                    padding: 2px 4px;
                                    border-radius: 3px;
                                    transition: background-color 0.2s ease;
                                }
                                
                                .clear-filter:hover {
                                    background: #f0f7ff;
                                }
                                
                                .filter-options {
                                    display: flex;
                                    flex-direction: column;
                                    gap: 6px;
                                }
                                
                                .filter-option {
                                    display: flex;
                                    align-items: center;
                                    gap: 8px;
                                    cursor: pointer;
                                    padding: 4px 6px;
                                    border-radius: 4px;
                                    transition: background-color 0.2s ease;
                                    font-size: 13px;
                                }
                                
                                .filter-option:hover {
                                    background: #f8f9fa;
                                }
                                
                                .filter-option input[type="checkbox"] {
                                    margin: 0;
                                    cursor: pointer;
                                }
                                
                                .filter-actions {
                                    padding: 12px;
                                    border-top: 1px solid #f1f3f4;
                                    display: flex;
                                    gap: 8px;
                                    justify-content: flex-end;
                                }
                                
                                .clear-all-btn {
                                    background: #f8f9fa;
                                    border: 1px solid #dee2e6;
                                    color: #6c757d;
                                    padding: 6px 12px;
                                    border-radius: 4px;
                                    font-size: 12px;
                                    cursor: pointer;
                                    transition: all 0.2s ease;
                                }
                                
                                .clear-all-btn:hover {
                                    background: #e9ecef;
                                }
                                
                                .apply-filters-btn {
                                    background: #4a90e2;
                                    border: 1px solid #4a90e2;
                                    color: white;
                                    padding: 6px 12px;
                                    border-radius: 4px;
                                    font-size: 12px;
                                    cursor: pointer;
                                    transition: all 0.2s ease;
                                }
                                
                                .apply-filters-btn:hover {
                                    background: #357abd;
                                    border-color: #357abd;
                                }
                                
                                /* 响应式调整 */
                                @media (max-width: 768px) {
                                    .example-files-toolbar {
                                        flex-direction: column;
                                        gap: 10px;
                                    }
                                    
                                    .toolbar-left,
                                    .toolbar-right {
                                        width: 100%;
                                        justify-content: space-between;
                                    }
                                    
                                    .filter-dropdown {
                                        right: auto;
                                        left: 0;
                                        min-width: 100%;
                                    }
                                }
                                </style>
                                <div id="intensity-preview-plot" class="preview-plot"></div>
                            </div>
                        </div>

                        <!-- 光强分布阶段参数 -->
                        <div id="formula-intensity-params" class="formula-params-container">
                        
                        <!-- 参数1: angle_a -->
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label">
                                <span class="parameter-name">角度参数 (a)</span>
                                
                                <span class="parameter-value">11.7</span>
                            </div>
                            <div class="parameter-input">
                                <input type="range" id="angle_a" class="slider" min="1" max="45" step="0.1" value="11.7" title="角度参数滑块" aria-label="角度参数">
                                <input type="number" class="number-input" value="11.7" min="1" max="45" step="0.1" title="角度参数数值输入" aria-label="角度参数数值">
                            </div>
                            <div class="parameter-description" data-i18n="param_desc_angle_a">光强分布阶段：控制干涉条纹角度，角度大=条纹密度高=空间频率高，角度小=条纹稀疏</div>
                        </div>
                        
                        <!-- 参数2: wavelength -->
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label">
                                <span class="parameter-name">光波长 (λ)</span>
                                
                                <span class="parameter-value">405</span>
                            </div>
                            <div class="parameter-input">
                                <input type="range" id="wavelength" class="slider" min="200" max="800" step="1" value="405" title="光波长滑块" aria-label="光波长">
                                <input type="number" id="wavelength_number" class="number-input" value="405" min="200" max="800" step="1" title="光波长数值输入" aria-label="光波长数值">
                            </div>
                            <div class="parameter-description" data-i18n="param_desc_wavelength">光强分布阶段：入射光的波长，影响干涉条纹空间频率，常用值：365nm(i线)、405nm(h线)、436nm(g线)</div>
                        </div>
                        
                        <!-- 参数3: V -->
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label">
                                <span class="parameter-name">干涉条纹可见度 (V)
                                    <i class="fas fa-info-circle v-info-icon" id="v-info-icon" title="点击查看当前V值对应的对比度类型和公式"></i>
                                </span>
                                
                                <span class="parameter-value">0.8</span>
                            </div>
                            <div class="parameter-input">
                                <input type="range" id="V" class="slider" min="0" max="1" step="0.01" value="0.8" title="干涉条纹可见度滑块" aria-label="干涉条纹可见度">
                                <input type="number" class="number-input" value="0.8" min="0" max="1" step="0.01" title="干涉条纹可见度数值输入" aria-label="干涉条纹可见度数值">
                            </div>
                            <div class="parameter-description" data-i18n="param_desc_V">光强分布阶段：干涉条纹的对比度，范围：0-1</div>
                        </div>

                        <!-- V值对比度类型提示弹窗 -->
                        <div id="v-tooltip" class="v-tooltip" style="display: none;">
                            <div class="v-tooltip-header">
                                <span class="v-tooltip-title">对比度分析</span>
                                <button class="v-tooltip-close" onclick="hideVTooltip()">&times;</button>
                            </div>
                            <div class="v-tooltip-content">
                                <div class="v-tooltip-section">
                                    <div class="v-tooltip-label">当前V值:</div>
                                    <div class="v-tooltip-value" id="v-current-value">0.8</div>
                                </div>
                                <div class="v-tooltip-section">
                                    <div class="v-tooltip-label">对比度类型:</div>
                                    <div class="v-tooltip-type" id="v-contrast-type">高对比度</div>
                                </div>
                                <div class="v-tooltip-section">
                                    <div class="v-tooltip-label">使用公式:</div>
                                    <div class="v-tooltip-formula" id="v-formula">
                                        <div class="formula-text">thickness = { 0.98 if D(x) ≤ D_threshold; exp(-C×D(x))×0.1 if D(x) > D_threshold }</div>
                                    </div>
                                </div>
                                <div class="v-tooltip-section">
                                    <div class="v-tooltip-label">特性说明:</div>
                                    <div class="v-tooltip-description" id="v-description">
                                        严格的二值化阈值效应，未曝光区域厚度≈0.98，曝光区域几乎完全溶解
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 参数4: K -->
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label">
                                <span class="parameter-name">空间频率 (K)</span>
                                
                                <span class="parameter-value">2</span>
                            </div>
                            <div class="parameter-input">
                                <input type="range" id="K" class="slider" min="0.1" max="10" step="0.1" value="2" title="空间频率滑块" aria-label="空间频率">
                                <input type="number" class="number-input" value="2" min="0.1" max="10" step="0.1" title="空间频率数值输入" aria-label="空间频率数值">
                            </div>
                            <div class="parameter-description" data-i18n="param_desc_K">光强分布阶段：干涉条纹的空间频率，单位：rad/μm</div>
                        </div>
                        
                        <!-- 参数5: I_avg -->
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label">
                                <span class="parameter-name">平均入射光强度 (I<sub>avg</sub>)</span>
                                
                                <span class="parameter-value">10</span>
                            </div>
                            <div class="parameter-input">
                                <input type="range" id="I_avg" class="slider" min="0.1" max="100" step="0.1" value="0.5" title="平均入射光强度滑块" aria-label="平均入射光强度">
                                <input type="number" class="number-input" value="0.5" min="0.1" max="100" step="0.1" title="平均入射光强度数值输入" aria-label="平均入射光强度数值">
                            </div>
                            <div class="parameter-description" data-i18n="param_desc_I_avg">光强分布阶段：平均入射光强度，单位：mW/cm²</div>
                        </div>
                        
                        </div> <!-- End of formula-params-container -->

                        <!-- 曝光反应阶段参数 -->
                        
                        <!-- 参数6: C -->
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label">
                                <span class="parameter-name">曝光常数 (C)</span>
                                
                                <span class="parameter-value">0.022</span>
                            </div>
                            <div class="parameter-input">
                                <input type="range" id="C" class="slider" min="0.001" max="0.1" step="0.001" value="0.022" title="曝光常数滑块" aria-label="曝光常数">
                                <input type="number" class="number-input" value="0.022" min="0.001" max="0.1" step="0.001" title="曝光常数数值输入" aria-label="曝光常数数值">
                            </div>
                            <div class="parameter-description" data-i18n="param_desc_C">曝光反应阶段：控制光刻胶曝光反应速度，值大=反应快=溶解度高，值小=反应慢</div>
                        </div>
                        
                        <!-- 参数7: exposure_threshold -->
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label">
                                <span class="parameter-name">曝光阈值 (cd)</span>
                                
                                <span class="parameter-value">20</span>
                            </div>
                            <div class="parameter-input">
                                <input type="range" id="exposure_threshold" class="slider" min="1" max="100" step="1" value="20" title="曝光阈值滑块" aria-label="曝光阈值">
                                <input type="number" class="number-input" value="20" min="1" max="100" step="1" title="曝光阈值数值输入" aria-label="曝光阈值数值">
                            </div>
                            <div class="parameter-description" data-i18n="param_desc_exposure_threshold">曝光反应阶段：控制曝光反应阈值，阈值高=需更强曝光才反应，阈值低=反应条件宽松</div>
                        </div>
                        
                    </div>

                    <!-- 曝光时间窗口参数容器 -->
                    <div class="parameter-group-container" id="dill-exposure-time-params-container" data-title="曝光时间窗口参数" data-i18n-title="dill_exposure_time_params">
                        <!-- 曝光计量计算选项 -->
                        <div class="parameter-item">
                            <div class="parameter-label">
                                <span class="parameter-name">曝光计量计算方式</span>
                            </div>
                            <div class="parameter-input">
                                <select id="exposure_calculation_method" class="method-select" title="选择曝光计量计算方式" aria-label="曝光计量计算方式选择">
                                    <option value="standard">标准模式</option>
                                    <option value="cumulative">多段曝光时间累积</option>
                                </select>
                            </div>
                            <div class="parameter-description">选择曝光计量计算方式：标准模式(单一时间)或多段曝光时间累积模式</div>
                        </div>

                        <!-- 单一曝光时间参数 -->
                        <div class="parameter-item slider-fill" id="standard_exposure_time_container">
                            <div class="parameter-label">
                                <span class="parameter-name">曝光时间 (t<sub>exp</sub>)</span>
                                
                                <span class="parameter-value">100</span>
                            </div>
                            <div class="parameter-input">
                                <input type="range" id="t_exp" class="slider" min="0.1" max="1000" step="0.1" value="100" title="曝光时间滑块" aria-label="曝光时间">
                                <input type="number" class="number-input" value="100" min="0.1" max="1000" step="0.1" title="曝光时间数值输入" aria-label="曝光时间数值">
                            </div>
                            <div class="parameter-description" data-i18n="param_desc_t_exp">决定曝光剂量，时间长=剂量大=反应充分，时间短=剂量小=反应不足</div>
                        </div>
                        
                        <!-- 多段曝光时间累积参数 -->
                        <div class="parameter-item" id="cumulative_exposure_container" style="display: none;">
                            <div class="parameter-label">
                                <span class="parameter-name">多段曝光时间累积设置</span>
                            </div>
                            <div class="parameter-input">
                                <!-- 多段曝光时间累积设置 - 新布局 -->
                                <div class="exposure-config-wrapper">
                                    <!-- 顶部设置区域 -->
                                    <div class="exposure-settings-section">
                                        <!-- 时间模式选择 -->
                                        <div class="setting-item">
                                            <label for="time_mode">时间段设置方式:</label>
                                            <div class="setting-field">
                                                <select id="time_mode">
                                                    <option value="fixed">固定时间段</option>
                                                    <option value="custom">自定义时间点</option>
                                                </select>
                                            </div>
                                        </div>
                                        
                                        <!-- 单段时间长度设置 -->
                                        <div id="fixed-time-settings" class="setting-item">
                                            <label for="segment_duration">单段时间长度:</label>
                                            <div class="setting-field">
                                                <input type="number" id="segment_duration" value="1" min="0.1" max="10" step="0.1">
                                                <span class="unit">秒</span>
                                            </div>
                                        </div>
                                        
                                        <!-- 总段数设置 -->
                                        <div class="setting-item">
                                            <label for="segment_count">总段数:</label>
                                            <div class="setting-field">
                                                <input type="number" id="segment_count" value="5" min="1" max="50" step="1">
                                                <span class="unit">段</span>
                                            </div>
                                        </div>
                                        
                                        <!-- 总曝光时间显示 -->
                                        <div class="setting-item">
                                            <label>总曝光时间:</label>
                                            <div class="result-value-wrapper">
                                                <span id="total_exposure_time" class="result-value">5</span>
                                                <span class="unit">秒</span>
                                            </div>
                                        </div>
                                        
                                        <!-- 总曝光计量显示 -->
                                        <div class="setting-item">
                                            <label>总曝光计量:</label>
                                            <div class="result-value-wrapper">
                                                <span id="total_exposure_dose" class="result-value">2.5</span>
                                                <span class="unit">mJ/cm²</span>
                                            </div>
                                        </div>
                                        
                                        <!-- 生成按钮 -->
                                        <div class="setting-item">
                                            <label>&nbsp;</label>
                                            <button id="generate_segments_btn" class="generate-button">
                                                <i class="fas fa-sync-alt"></i> 生成段落设置
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 底部表格区域 -->
                                <div class="segments-table-section">
                                    <div class="section-header">
                                        <h3 class="section-title">曝光段落光强设置</h3>
                                        <div class="section-meta">光强单位: mW/cm²</div>
                                    </div>
                                    
                                    <div class="segments-table-container">
                                        <div id="cumulative_segment_container">
                                            <!-- 段落会通过JS动态生成 -->
                                            <div class="placeholder-message">
                                                <div class="placeholder-icon"><i class="fas fa-table"></i></div>
                                                <p>请设置段数后点击生成按钮创建曝光段落表格</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 曝光时间窗口控制 -->
                        <div class="parameter-item" id="exposure-time-window-control">
                            <div class="parameter-label">
                                <span class="parameter-name">
                                    <i class="fas fa-clock"></i> 曝光时间窗口控制
                                </span>
                            </div>
                            <div class="parameter-input">
                                <label style="display: block; margin-bottom: 8px;">
                                    <input type="checkbox" id="enable_exposure_time_window_dill" style="margin-right: 8px;">
                                    启用曝光时间窗口（自定义多组曝光时间比较）
                                </label>
                            </div>
                            <div class="parameter-description">勾选后可自定义选择多组曝光时间进行比较，未勾选时使用上方单一曝光时间值</div>
                        </div>
                        
                        <!-- 曝光时间窗口参数 -->
                        <div id="dill_1d_exposure_time_params" style="display: none; margin-top: 10px; padding: 15px; background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 4px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);">
                            <!-- 快速时间列表选择 -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name">快速时间列表</span>
                                </div>
                                <div class="parameter-input" style="margin-top: 8px;">
                                    <div class="quick-time-buttons" style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 10px;">
                                        <button class="quick-time-btn" data-times="1, 5, 10, 50, 100" style="padding: 4px 8px; background: #e3f2fd; border: 1px solid #2196f3; border-radius: 4px; font-size: 12px; cursor: pointer;">
                                            短时 (1-100s)
                                        </button>
                                        <button class="quick-time-btn" data-times="50, 100, 250, 500, 1000" style="padding: 4px 8px; background: #fff3e0; border: 1px solid #ff9800; border-radius: 4px; font-size: 12px; cursor: pointer;">
                                            中时 (50-1000s)
                                        </button>
                                        <button class="quick-time-btn" data-times="500, 1000, 2500, 5000, 10000" style="padding: 4px 8px; background: #fce4ec; border: 1px solid #e91e63; border-radius: 4px; font-size: 12px; cursor: pointer;">
                                            长时 (500-10000s)
                                        </button>
                                        <button class="quick-time-btn" data-times="30, 60, 250, 1000, 2000" style="padding: 4px 8px; background: #f3e5f5; border: 1px solid #9c27b0; border-radius: 4px; font-size: 12px; cursor: pointer;">
                                            经典组合
                                        </button>
                                        <button class="quick-time-btn" data-times="10, 30, 100, 300, 1000, 3000" style="padding: 4px 8px; background: #e8f5e8; border: 1px solid #4caf50; border-radius: 4px; font-size: 12px; cursor: pointer;">
                                            细分梯度
                                        </button>
                                    </div>
                                </div>
                                <div class="parameter-description" style="color: #666; font-size: 12px;">
                                    点击快速选择常用的曝光时间组合
                                </div>
                            </div>
                            
                            <!-- 曝光时间输入 -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name">自定义曝光时间列表 (秒)</span>
                                    <button id="reset_exposure_times_btn" class="reset-btn" style="margin-left: 10px; padding: 2px 8px; font-size: 12px; background: #ff9800; color: white; border: none; border-radius: 3px; cursor: pointer;">
                                        <i class="fas fa-undo"></i> 恢复默认
                                    </button>
                                </div>
                                <div class="parameter-input" style="margin-top: 8px;">
                                    <textarea id="exposure_times_input" class="exposure-time-input" placeholder="输入曝光时间，用逗号分隔，例如：30, 60, 250, 1000, 2000" style="width: 100%; height: 60px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-family: monospace; font-size: 13px; resize: vertical;">30, 60, 250, 1000, 2000</textarea>
                                </div>
                                <div class="parameter-description" style="margin-top: 5px;">
                                    <span style="color: #666;">输入格式：用逗号分隔的数字，例如：30, 60, 250, 1000, 2000</span>
                                    <div id="exposure_times_status" style="margin-top: 5px; padding: 5px; border-radius: 3px; display: none;">
                                        <span class="status-text"></span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 曝光时间预览 -->
                            <div class="parameter-item">
                                <div class="parameter-label">
                                    <span class="parameter-name">当前曝光时间列表</span>
                                    <span class="parameter-value" id="exposure_times_count">5组</span>
                                </div>
                                <div class="parameter-input">
                                    <div id="exposure_times_preview" class="exposure-times-preview" style="padding: 8px; background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 4px; min-height: 30px; font-family: monospace;">
                                        <span class="preview-text" style="color: #666;">t = 30s, 60s, 250s, 1000s, 2000s</span>
                                    </div>
                                </div>
                                <div class="parameter-description">实时预览解析后的曝光时间列表，确认无误后进行计算</div>
                            </div>
                        </div>

                    </div>

                    <!-- 修改Dill模型的正弦波类型选择框 -->
                    <div class="parameter-item sine-wave-type-container" id="dill-sine-type-container" data-title="波形类型" data-i18n-title="sine_wave_type">
                        <label for="dill-sine-type" data-i18n="sine_wave_type_label">正弦波类型：</label>
                        <select id="dill-sine-type" class="model-select">
                            <option value="single" selected data-i18n="sine_wave_type_single">一维正弦波</option>
                            <option value="multi" data-i18n="sine_wave_type_multi">二维正弦波</option>
                            <option value="3d" data-i18n="sine_wave_type_3d">三维正弦波</option>
                        </select>
                    </div>
                    
                    <!-- Dill模型1D时间动画参数容器 -->
                    <div class="parameter-group-container" id="dill-1d-animation-params-container" data-title="1D时间动画参数" data-i18n-title="dill_1d_animation_params" style="display: none;">
                        <!-- 1D动画开关 -->
                        <div class="parameter-item">
                            <div class="parameter-label">
                                <span class="parameter-name">
                                    <i class="fas fa-play-circle"></i> 1D时间动画控制
                                </span>
                            </div>
                            <div class="parameter-input">
                                <label style="display: block; margin-bottom: 8px;">
                                    <input type="checkbox" id="enable_1d_animation_dill" style="margin-right: 8px;">
                                    启用1D时间动画（曝光时间变化+时间维度）
                                </label>
                            </div>
                            <div class="parameter-description">勾选后将生成随曝光时间变化的1D动画，展示光刻胶反应的动态过程</div>
                        </div>
                        
                        <!-- 1D动画参数 -->
                        <div id="dill_1d_time_params" style="display: none; margin-top: 10px; padding: 10px; background: rgba(0, 123, 255, 0.1); border-radius: 5px;">
                            <!-- 开始时间 -->
                            <div class="parameter-item slider-fill">
                                <div class="parameter-label">
                                    <span class="parameter-name">时间范围 (s)</span>
                                    <span class="parameter-value">5</span>
                                </div>
                                <div class="parameter-input">
                                    <label>开始时间: </label>
                                    <input type="number" id="t_start_1d_dill" value="0" min="0" max="20" step="0.1" style="width: 80px;">
                                    <label style="margin-left: 10px;">结束时间: </label>
                                    <input type="number" id="t_end_1d_dill" value="5" min="0.1" max="20" step="0.1" style="width: 80px;">
                                </div>
                                <div class="parameter-description">1D动画的曝光时间范围，单位：秒</div>
                            </div>
                            
                            <!-- 时间步数 -->
                            <div class="parameter-item slider-fill">
                                <div class="parameter-label">
                                    <span class="parameter-name">时间步数</span>
                                    <span class="parameter-value">500</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" id="time_steps_1d_dill" class="slider" min="10" max="5000" step="1" value="500">
                                    <input type="number" class="number-input" value="500" min="10" max="5000" step="1">
                                </div>
                                <div class="parameter-description">动画帧数，越多越流畅但计算时间越长</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 1D V（对比度）评估参数容器 -->
                    <div class="parameter-group-container" id="dill-1d-v-evaluation-params-container" data-title="1D V（对比度）评估参数" data-i18n-title="dill_1d_v_evaluation_params" style="display: none;">
                        <!-- V评估开关 -->
                        <div class="parameter-item">
                            <div class="parameter-label">
                                <span class="parameter-name">
                                    <i class="fas fa-chart-line"></i> 1D V（对比度）评估控制
                                </span>
                            </div>
                            <div class="parameter-input">
                                <label style="display: block; margin-bottom: 8px;">
                                    <input type="checkbox" id="enable_1d_v_evaluation_dill" style="margin-right: 8px;">
                                    启用1D V（对比度）评估（对比度变化+比较分析）
                                </label>
                            </div>
                            <div class="parameter-description">勾选后将生成不同V值下的1D分布，比较对比度对光刻胶反应的影响效果</div>
                        </div>
                        
                        <!-- V评估参数 -->
                        <div id="dill_1d_v_params" style="display: none; margin-top: 10px; padding: 10px; background: rgba(255, 152, 0, 0.1); border-radius: 5px;">
                            <!-- V值范围 -->
                            <div class="parameter-item slider-fill">
                                <div class="parameter-label">
                                    <span class="parameter-name">V值范围（对比度）</span>
                                    <span class="parameter-value">0.9</span>
                                </div>
                                <div class="parameter-input">
                                    <label>起始V值: </label>
                                    <input type="number" id="v_start_1d_dill" value="0.1" min="0" max="1" step="0.05" style="width: 80px;">
                                    <label style="margin-left: 10px;">结束V值: </label>
                                    <input type="number" id="v_end_1d_dill" value="1.0" min="0" max="1" step="0.05" style="width: 80px;">
                                </div>
                                <div class="parameter-description">V评估的对比度范围，V=0表示无对比度，V=1表示最大对比度</div>
                            </div>
                            
                            <!-- V评估步数 -->
                            <div class="parameter-item slider-fill">
                                <div class="parameter-label">
                                    <span class="parameter-name">V评估步数</span>
                                    <span class="parameter-value">500</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" id="v_steps_1d_dill" class="slider" min="10" max="5000" step="1" value="500">
                                    <input type="number" class="number-input" value="500" min="10" max="5000" step="1">
                                </div>
                                <div class="parameter-description">V评估的步数，越多越精细但计算时间越长</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 修改Dill模型的二维波形参数容器 -->
                    <div id="dill-multisine-params" class="sine-wave-params-container" data-title="二维波形参数" data-i18n-title="twod_sine_wave_params" style="display:none;">
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="kx_label">Kx (空间频率x)</span></div>
                            <div class="parameter-input"><input type="number" id="Kx" value="2" min="0.1" max="10" step="0.1"></div>
                            <div class="parameter-description" data-i18n="kx_description">x方向空间频率，单位：rad/μm，范围：0.1~10</div>
                        </div>
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="ky_label">Ky (空间频率y)</span></div>
                            <div class="parameter-input"><input type="number" id="Ky" value="1" min="0.1" max="100" step="0.1"></div>
                            <div class="parameter-description" data-i18n="ky_description">y方向空间频率，单位：rad/μm，范围：0.1~100（必须大于0）</div>
                        </div>
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="phi_label">φ(t) (相位表达式)</span></div>
                            <div class="parameter-input phi-expr-container">
                                <select id="phi_expr_select" class="phi-expr-select" title="选择常用相位表达式或使用自定义表达式">
                                    <option value="custom" data-i18n="phi_expr_custom">自定义输入</option>
                                    <option value="0" selected data-i18n="phi_expr_constant">常量: 0</option>
                                    <option value="0.5*t" data-i18n="phi_expr_linear">线性变化: 0.5*t</option>
                                    <option value="sin(t)" data-i18n="phi_expr_sin">正弦变化: sin(t)</option>
                                    <option value="cos(t)" data-i18n="phi_expr_cos">余弦变化: cos(t)</option>
                                    <option value="sin(2*PI*t)" data-i18n="phi_expr_sin_2pi">正弦周期变化: sin(2*PI*t)</option>
                                    <option value="0.2*t*t" data-i18n="phi_expr_quadratic">二次变化: 0.2*t*t</option>
                                    <option value="t*sin(2*PI*t)" data-i18n="phi_expr_complex1">复合函数: t*sin(2*PI*t)</option>
                                    <option value="exp(-0.1*t)*sin(t)" data-i18n="phi_expr_complex2">衰减正弦: exp(-0.1*t)*sin(t)</option>
                                    <option value="PI/4" data-i18n="phi_expr_pi4">固定相位: PI/4</option>
                                </select>
                                <i class="fas fa-question-circle phi-expr-help-icon"></i>
                                <div class="phi-expr-tooltip" data-i18n="phi_expr_help">支持数学函数: sin, cos, tan, exp, abs, sqrt, PI, E</div>
                                <input type="text" id="phi_expr" value="0" class="phi-expr-input" placeholder="输入相位表达式，可使用t,PI,sin,cos,exp等函数">
                            </div>
                                            <div class="phi-expr-error" style="color:#d00;font-size:0.95em;display:none;"></div>
                <button id="phi-expr-preview-btn" class="preview-button" style="margin-top:4px;display:none;">预览分布</button>
                <div id="phi-expr-preview-plot" class="preview-plot preview-plot-2d" style="margin-top:8px;display:none;"></div>
                <!-- t值滑块和动态预览控制 -->
                <div id="phi-expr-preview-controls" class="phase-preview-controls" style="margin-top: 10px; padding: 10px; background: rgba(0,0,0,0.03); border-radius: 4px; display: none;">
                    <div class="parameter-label">
                        <span class="parameter-name">t值 (相位参数)</span>
                        <span class="parameter-value t-value">0</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="t-slider slider" id="phi-expr-t-slider" min="0" max="6.28" step="0.01" value="0" title="t值滑块">
                        <div class="animation-controls" style="margin-top: 8px;">
                            <button class="play-animation-btn" id="phi-expr-play-btn" title="播放动画"><i class="fas fa-play"></i> 播放动画</button>
                            <button class="stop-animation-btn" id="phi-expr-stop-btn" style="display:none;" title="停止动画"><i class="fas fa-pause"></i> 停止动画</button>
                        </div>
                    </div>
                    <div class="parameter-description">调整t值可以实时预览相位变化，或点击播放按钮查看动态效果</div>
                </div>
                        </div>
                        <!-- Y范围参数，移到二维波形参数容器内 -->
                        <div class="parameter-item">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="y_range_label">y范围 (μm)：</span></div>
                            <div class="parameter-input">
                                <input type="number" id="y_min" value="0" min="0" max="100" step="0.1"> ~
                                <input type="number" id="y_max" value="10" min="0" max="100" step="0.1">
                                <label data-i18n="y_resolution_label">分辨率：</label>
                                <input type="number" id="y_points" value="100" min="1" max="200" step="1">
                            </div>
                            <div class="parameter-description" data-i18n="y_range_description">二维分布时有效，y_min=y_max表示一维，y范围0~100，分辨率1~200</div>
                        </div>
                    </div>

                    <!-- 添加三维正弦波参数输入区域 -->
                    <div id="dill-3dsine-params" class="sine-wave-params-container" data-title="三维波形参数" data-i18n-title="3d_sine_wave_params" style="display:none;">
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="kx_label">Kx (空间频率x)</span></div>
                            <div class="parameter-input"><input type="number" id="Kx_3d" value="2" min="0.1" max="10" step="0.1"></div>
                            <div class="parameter-description" data-i18n="kx_description">x方向空间频率，单位：rad/μm，范围：0.1~10</div>
                        </div>
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="ky_label">Ky (空间频率y)</span></div>
                            <div class="parameter-input"><input type="number" id="Ky_3d" value="1" min="0.1" max="10" step="0.1"></div>
                            <div class="parameter-description" data-i18n="ky_description">y方向空间频率，单位：rad/μm，范围：0.1~10</div>
                        </div>
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="kz_label">Kz (空间频率z)</span></div>
                            <div class="parameter-input"><input type="number" id="Kz_3d" value="1" min="0.1" max="10" step="0.1"></div>
                            <div class="parameter-description" data-i18n="kz_description">z方向空间频率，单位：rad/μm，范围：0.1~10</div>
                        </div>
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="phi_label">φ(t) (相位表达式)</span></div>
                            <div class="parameter-input phi-expr-container">
                                <select id="phi_expr_3d_select" class="phi-expr-select" title="选择常用相位表达式或使用自定义表达式">
                                    <option value="custom" data-i18n="phi_expr_custom">自定义输入</option>
                                    <option value="0" data-i18n="phi_expr_constant">常量: 0 (静态模式)</option>
                                    <option value="0.5*t" data-i18n="phi_expr_linear">线性变化: 0.5*t</option>
                                    <option value="sin(t)" selected data-i18n="phi_expr_sin">正弦变化: sin(t) (推荐4D动画)</option>
                                    <option value="cos(t)" data-i18n="phi_expr_cos">余弦变化: cos(t)</option>
                                    <option value="sin(2*PI*t)" data-i18n="phi_expr_sin_2pi">正弦周期变化: sin(2*PI*t)</option>
                                    <option value="0.2*t*t" data-i18n="phi_expr_quadratic">二次变化: 0.2*t*t</option>
                                    <option value="t*sin(2*PI*t)" data-i18n="phi_expr_complex1">复合函数: t*sin(2*PI*t)</option>
                                    <option value="exp(-0.1*t)*sin(t)" data-i18n="phi_expr_complex2">衰减正弦: exp(-0.1*t)*sin(t)</option>
                                    <option value="PI/4" data-i18n="phi_expr_pi4">固定相位: PI/4</option>
                                </select>
                                <i class="fas fa-question-circle phi-expr-help-icon"></i>
                                <div class="phi-expr-tooltip" data-i18n="phi_expr_help">支持数学函数: sin, cos, tan, exp, abs, sqrt, PI, E</div>
                                <input type="text" id="phi_expr_3d" value="sin(t)" class="phi-expr-input" placeholder="输入相位表达式，可使用t,PI,sin,cos,exp等函数">
                            </div>
                                            <div class="phi-expr-error" style="color:#d00;font-size:0.95em;display:none;"></div>
                <button id="phi-expr-3d-preview-btn" class="preview-button" style="margin-top:4px;display:none;">预览3D分布</button>
                <div id="phi-expr-3d-preview-plot" class="preview-plot preview-plot-3d" style="margin-top:8px;display:none;"></div>
                <!-- 3D t值滑块和动态预览控制 -->
                <div id="phi-expr-3d-preview-controls" class="phase-preview-controls" style="margin-top: 10px; padding: 10px; background: rgba(0,0,0,0.03); border-radius: 4px; display: none;">
                    <div class="parameter-label">
                        <span class="parameter-name">t值 (相位参数)</span>
                        <span class="parameter-value t-value">0</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="t-slider slider" id="phi-expr-3d-t-slider" min="0" max="6.28" step="0.01" value="0" title="t值滑块">
                        <div class="animation-controls" style="margin-top: 8px;">
                            <button class="play-animation-btn" id="phi-expr-3d-play-btn" title="播放动画"><i class="fas fa-play"></i> 播放动画</button>
                            <button class="stop-animation-btn" id="phi-expr-3d-stop-btn" style="display:none;" title="停止动画"><i class="fas fa-pause"></i> 停止动画</button>
                        </div>
                    </div>
                    <div class="parameter-description">调整t值可以实时预览相位变化，或点击播放按钮查看动态效果</div>
                </div>
                        </div>
                        <div class="parameter-item">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="3d_range_label">三维显示范围</span></div>
                            <div class="parameter-input">
                                <div class="range-row">
                                    <label>X: </label>
                                    <input type="number" id="x_min_3d" value="0" min="0" max="100" step="0.1"> ~ 
                                    <input type="number" id="x_max_3d" value="10" min="0" max="100" step="0.1">
                                </div>
                                <div class="range-row">
                                    <label>Y: </label>
                                    <input type="number" id="y_min_3d" value="0" min="0" max="100" step="0.1"> ~ 
                                    <input type="number" id="y_max_3d" value="10" min="0" max="100" step="0.1">
                                </div>
                                <div class="range-row">
                                    <label>Z: </label>
                                    <input type="number" id="z_min_3d" value="0" min="0" max="100" step="0.1"> ~ 
                                    <input type="number" id="z_max_3d" value="10" min="0" max="100" step="0.1">
                                </div>
                            </div>
                            <div class="parameter-description" data-i18n="3d_range_description">三维分布显示范围，单位：μm</div>
                        </div>
                    </div>
                    
                    <!-- DILL模型4D动画参数 -->
                    <div class="parameter-group-container" data-title="4D动画参数" data-i18n-title="4d_animation_params">
                        <div class="parameter-item">
                            <div class="parameter-label">
                                <span class="parameter-name">
                                    <i class="fas fa-play-circle"></i> 4D动画控制
                                </span>
                            </div>
                            <div class="parameter-input">
                                <label style="display: block; margin-bottom: 8px;">
                                    <input type="checkbox" id="enable_4d_animation_dill" style="margin-right: 8px;">
                                    启用4D时间动画（3D空间+时间维度）
                                </label>
                            </div>
                            <div class="parameter-description">
                                <span style="color: #3498db; font-weight: bold;">💡 提示：</span>
                                请先将上方"波形类型"选择为"三维正弦波"，然后勾选此选项以启用4D动画功能
                            </div>
                        </div>
                        
                        <div id="dill_4d_time_params" style="display:none; margin-top: 10px; padding: 10px; background: rgba(52, 152, 219, 0.1); border-radius: 5px;">
                            <div class="parameter-item slider-fill">
                                <div class="parameter-label">
                                    <span class="parameter-name">时间范围 (s)</span>
                                    <span class="parameter-value">5</span>
                                </div>
                                <div class="parameter-input">
                                    <label>开始时间: </label>
                                    <input type="number" id="t_start_dill" value="0" min="0" max="20" step="0.1" style="width: 80px;">
                                    <label style="margin-left: 10px;">结束时间: </label>
                                    <input type="number" id="t_end_dill" value="5" min="0.1" max="20" step="0.1" style="width: 80px;">
                                </div>
                                <div class="parameter-description">4D动画的时间范围，单位：秒</div>
                            </div>
                            
                            <div class="parameter-item slider-fill">
                                <div class="parameter-label">
                                    <span class="parameter-name">时间步数</span>
                                    <span class="parameter-value">500</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" id="time_steps_dill" class="slider" min="10" max="5000" step="1" value="500">
                                    <input type="number" class="number-input" value="500" min="10" max="5000" step="1">
                                </div>
                                <div class="parameter-description">动画帧数，越多越流畅但计算时间越长</div>
                            </div>
                            
                            <div class="parameter-item slider-fill">
                                <div class="parameter-label">
                                    <span class="parameter-name">动画速度 (ms/帧)</span>
                                    <span class="parameter-value">500</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" id="dill_animation_speed" class="slider" min="100" max="2000" step="50" value="500">
                                    <input type="number" class="number-input" value="500" min="100" max="2000" step="50">
                                </div>
                                <div class="parameter-description">每帧播放间隔，越小播放越快</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="enhanced-dill-params" class="parameters-grid" style="display:none;">
                    <!-- Enhanced Dill模型基本参数容器 -->
                    <div class="parameter-group-container" id="enhanced-dill-basic-params-container" data-title="增强Dill模型基本参数" data-i18n-title="enhanced_dill_basic_params">
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name">胶厚 (z<sub>h</sub>, μm)</span><span class="parameter-value">10</span></div>
                            <div class="parameter-input"><input type="range" id="z_h" class="slider" min="1" max="50" step="0.1" value="10"><input type="number" class="number-input" value="10" min="1" max="50" step="0.1"></div>
                            <div class="parameter-description" data-i18n="param_desc_z_h">影响光传播深度，厚度大=吸收多，厚度小=穿透强</div>
                        </div>
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name">前烘温度 (T, ℃)</span><span class="parameter-value">100</span></div>
                            <div class="parameter-input"><input type="range" id="T" class="slider" min="60" max="150" step="1" value="100"><input type="number" class="number-input" value="100" min="60" max="150" step="1"></div>
                            <div class="parameter-description" data-i18n="param_desc_T">影响溶剂挥发速度，温度高=挥发快=胶膜更致密</div>
                        </div>
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name">前烘时间 (t<sub>B</sub>, min)</span><span class="parameter-value">2</span></div>
                            <div class="parameter-input"><input type="range" id="t_B" class="slider" min="0.5" max="10" step="0.1" value="2"><input type="number" class="number-input" value="2" min="0.5" max="10" step="0.1"></div>
                            <div class="parameter-description" data-i18n="param_desc_t_B">影响胶膜稳定性，时间长=溶剂去除彻底=曝光均匀</div>
                        </div>
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name">初始光强 (I<sub>0</sub>)</span><span class="parameter-value">1</span></div>
                            <div class="parameter-input"><input type="range" id="I_0" class="slider" min="0.1" max="2" step="0.01" value="1"><input type="number" class="number-input" value="1" min="0.1" max="2" step="0.01"></div>
                            <div class="parameter-description" data-i18n="param_desc_I0">影响曝光强度，值大=光强高=反应快，值小=光强低=反应慢</div>
                        </div>
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name">初始PAC浓度 (M<sub>0</sub>)</span><span class="parameter-value">1</span></div>
                            <div class="parameter-input"><input type="range" id="M_0" class="slider" min="0.1" max="2" step="0.01" value="1"><input type="number" class="number-input" value="1" min="0.1" max="2" step="0.01"></div>
                            <div class="parameter-description" data-i18n="param_desc_M0">影响光敏剂浓度，值大=敏感度高=易曝光，值小=敏感度低=需长时间</div>
                        </div>
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name">曝光时间 (t<sub>exp</sub>)</span><span class="parameter-value">100</span></div>
                            <div class="parameter-input"><input type="range" id="enhanced_t_exp" class="slider" min="0.1" max="1000" step="0.1" value="100"><input type="number" class="number-input" value="100" min="0.1" max="1000" step="0.1"></div>
                            <div class="parameter-description" data-i18n="param_desc_t_exp_enhanced">决定曝光剂量，时间长=剂量大=反应充分，时间短=剂量小=反应不足</div>
                        </div>

                        <!-- 增强Dill模型1D模式的V和K参数 -->
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label">
                                <span class="parameter-name">干涉条纹可见度 (V)</span>
                                <span class="parameter-value">0.8</span>
                            </div>
                            <div class="parameter-input">
                                <input type="range" id="enhanced_V" class="slider" min="0" max="1" step="0.01" value="0.8">
                                <input type="number" class="number-input" value="0.8" min="0" max="1" step="0.01">
                            </div>
                            <div class="parameter-description" data-i18n="param_desc_enhanced_V">影响光强对比度，值大=条纹清晰=图案锐利，值小=条纹模糊=图案柔和</div>
                        </div>
                        
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label">
                                <span class="parameter-name">空间频率 (K)</span>
                                <span class="parameter-value">2</span>
                            </div>
                            <div class="parameter-input">
                                <input type="range" id="enhanced_K" class="slider" min="0.1" max="10" step="0.1" value="2">
                                <input type="number" class="number-input" value="2" min="0.1" max="10" step="0.1">
                            </div>
                            <div class="parameter-description" data-i18n="param_desc_enhanced_K">决定条纹密度，值大=条纹密集=分辨率高，值小=条纹稀疏=特征尺寸大</div>
                        </div>
                    </div>

                    <!-- 修改Enhanced Dill模型的正弦波类型选择框 -->
                    <div class="parameter-item sine-wave-type-container" id="enhanced-dill-sine-type-container" data-title="波形类型" data-i18n-title="sine_wave_type">
                        <label for="enhanced-dill-sine-type" data-i18n="sine_wave_type_label">正弦波类型：</label>
                        <select id="enhanced-dill-sine-type" class="model-select">
                            <option value="single" selected data-i18n="sine_wave_type_single">一维正弦波</option>
                            <option value="multi" data-i18n="sine_wave_type_multi">二维正弦波</option>
                            <option value="3d" data-i18n="sine_wave_type_3d">三维正弦波</option>
                        </select>
                    </div>
                    <div id="enhanced-dill-multisine-params" class="sine-wave-params-container" data-title="二维波形参数" data-i18n-title="twod_sine_wave_params" style="display:none;">
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="kx_label">Kx (空间频率x)</span></div>
                            <div class="parameter-input"><input type="number" id="enhanced_Kx" value="2" min="0.1" max="10" step="0.1"></div>
                            <div class="parameter-description" data-i18n="kx_description">控制x方向条纹密度，值大=条纹密集，值小=条纹稀疏</div>
                        </div>
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="ky_label">Ky (空间频率y)</span></div>
                            <div class="parameter-input"><input type="number" id="enhanced_Ky" value="1" min="0.1" max="100" step="0.1"></div>
                            <div class="parameter-description" data-i18n="ky_description">控制y方向条纹密度，值大=条纹密集，值小=条纹稀疏</div>
                        </div>
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="phi_label">φ(t) (相位表达式)</span></div>
                            <div class="parameter-input phi-expr-container">
                                <select id="enhanced_phi_expr_select" class="phi-expr-select" title="选择常用相位表达式或使用自定义表达式">
                                    <option value="custom" data-i18n="phi_expr_custom">自定义输入</option>
                                    <option value="0" selected data-i18n="phi_expr_constant">常量: 0</option>
                                    <option value="0.5*t" data-i18n="phi_expr_linear">线性变化: 0.5*t</option>
                                    <option value="sin(t)" data-i18n="phi_expr_sin">正弦变化: sin(t)</option>
                                    <option value="cos(t)" data-i18n="phi_expr_cos">余弦变化: cos(t)</option>
                                    <option value="sin(2*PI*t)" data-i18n="phi_expr_sin_2pi">正弦周期变化: sin(2*PI*t)</option>
                                    <option value="0.2*t*t" data-i18n="phi_expr_quadratic">二次变化: 0.2*t*t</option>
                                    <option value="t*sin(2*PI*t)" data-i18n="phi_expr_complex1">复合函数: t*sin(2*PI*t)</option>
                                    <option value="exp(-0.1*t)*sin(t)" data-i18n="phi_expr_complex2">衰减正弦: exp(-0.1*t)*sin(t)</option>
                                    <option value="PI/4" data-i18n="phi_expr_pi4">固定相位: PI/4</option>
                                </select>
                                <i class="fas fa-question-circle phi-expr-help-icon"></i>
                                <div class="phi-expr-tooltip" data-i18n="phi_expr_help">支持数学函数: sin, cos, tan, exp, abs, sqrt, PI, E</div>
                                <input type="text" id="enhanced_phi_expr" value="0" class="phi-expr-input" placeholder="输入相位表达式，可使用t,PI,sin,cos,exp等函数">
                            </div>
                                            <div class="phi-expr-error" style="color:#d00;font-size:0.95em;display:none;"></div>
                <button id="enhanced-phi-expr-preview-btn" class="preview-button" style="margin-top:4px;display:none;">预览分布</button>
                <div id="enhanced-phi-expr-preview-plot" class="preview-plot preview-plot-2d" style="margin-top:8px;display:none;"></div>
                <!-- Enhanced Dill t值滑块和动态预览控制 -->
                <div id="enhanced-phi-expr-preview-controls" class="phase-preview-controls" style="margin-top: 10px; padding: 10px; background: rgba(155, 89, 182, 0.1); border-radius: 4px; display: none;">
                    <div class="parameter-label">
                        <span class="parameter-name">t值 (相位参数)</span>
                        <span class="parameter-value t-value">0</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="t-slider slider" id="enhanced-phi-expr-t-slider" min="0" max="6.28" step="0.01" value="0" title="t值滑块">
                        <div class="animation-controls" style="margin-top: 8px;">
                            <button class="play-animation-btn" id="enhanced-phi-expr-play-btn" title="播放动画"><i class="fas fa-play"></i> 播放动画</button>
                            <button class="stop-animation-btn" id="enhanced-phi-expr-stop-btn" style="display:none;" title="停止动画"><i class="fas fa-pause"></i> 停止动画</button>
                        </div>
                    </div>
                    <div class="parameter-description">调整t值可以实时预览相位变化，或点击播放按钮查看动态效果</div>
                </div>
                        </div>
                        <!-- Y范围参数，放在容器内部 -->
                        <div class="parameter-item">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="y_range_label">y范围 (μm)：</span></div>
                            <div class="parameter-input">
                                <input type="number" id="enhanced_y_min" value="0" min="0" max="100" step="0.1"> ~
                                <input type="number" id="enhanced_y_max" value="10" min="0" max="100" step="0.1">
                                <label data-i18n="y_resolution_label">分辨率：</label>
                                <input type="number" id="enhanced_y_points" value="100" min="1" max="200" step="1">
                            </div>
                            <div class="parameter-description" data-i18n="y_range_description">二维分布时有效，y_min=y_max表示一维，y范围0~100，分辨率1~200</div>
                        </div>
                    </div>

                    <!-- 添加增强Dill模型的三维正弦波参数输入区域 -->
                    <div id="enhanced-dill-3dsine-params" class="sine-wave-params-container" data-title="三维波形参数" data-i18n-title="3d_sine_wave_params" style="display:none;">
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="kx_label">Kx (空间频率x)</span></div>
                            <div class="parameter-input"><input type="number" id="enhanced_Kx_3d" value="2" min="0.1" max="10" step="0.1"></div>
                            <div class="parameter-description" data-i18n="kx_description">x方向空间频率，单位：rad/μm，范围：0.1~10</div>
                        </div>
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="ky_label">Ky (空间频率y)</span></div>
                            <div class="parameter-input"><input type="number" id="enhanced_Ky_3d" value="1" min="0.1" max="10" step="0.1"></div>
                            <div class="parameter-description" data-i18n="ky_description">y方向空间频率，单位：rad/μm，范围：0.1~10</div>
                        </div>
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="kz_label">Kz (空间频率z)</span></div>
                            <div class="parameter-input"><input type="number" id="enhanced_Kz_3d" value="1" min="0.1" max="10" step="0.1"></div>
                            <div class="parameter-description" data-i18n="kz_description">z方向空间频率，单位：rad/μm，范围：0.1~10</div>
                        </div>
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="phi_label">φ(t) (相位表达式)</span></div>
                            <div class="parameter-input phi-expr-container">
                                <select id="enhanced_phi_expr_3d_select" class="phi-expr-select" title="选择常用相位表达式或使用自定义表达式">
                                    <option value="custom" data-i18n="phi_expr_custom">自定义输入</option>
                                    <option value="0" data-i18n="phi_expr_constant">常量: 0 (静态模式)</option>
                                    <option value="0.5*t" data-i18n="phi_expr_linear">线性变化: 0.5*t</option>
                                    <option value="sin(t)" selected data-i18n="phi_expr_sin">正弦变化: sin(t) (推荐4D动画)</option>
                                    <option value="cos(t)" data-i18n="phi_expr_cos">余弦变化: cos(t)</option>
                                    <option value="sin(2*PI*t)" data-i18n="phi_expr_sin_2pi">正弦周期变化: sin(2*PI*t)</option>
                                    <option value="0.2*t*t" data-i18n="phi_expr_quadratic">二次变化: 0.2*t*t</option>
                                </select>
                                <input type="text" id="enhanced_phi_expr_3d" value="sin(t)" class="phi-expr-input" placeholder="输入相位表达式，可使用t,PI,sin,cos,exp等函数">
                            </div>
                                            <div class="phi-expr-error" style="color:#d00;font-size:0.95em;display:none;"></div>
                <button id="enhanced-phi-expr-3d-preview-btn" class="preview-button" style="margin-top:4px;display:none;">预览3D分布</button>
                <div id="enhanced-phi-expr-3d-preview-plot" class="preview-plot preview-plot-3d" style="margin-top:8px;display:none;"></div>
                <!-- Enhanced Dill 3D t值滑块和动态预览控制 -->
                <div id="enhanced-phi-expr-3d-preview-controls" class="phase-preview-controls" style="margin-top: 10px; padding: 10px; background: rgba(155, 89, 182, 0.1); border-radius: 4px; display: none;">
                    <div class="parameter-label">
                        <span class="parameter-name">t值 (相位参数)</span>
                        <span class="parameter-value t-value">0</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="t-slider slider" id="enhanced-phi-expr-3d-t-slider" min="0" max="6.28" step="0.01" value="0" title="t值滑块">
                        <div class="animation-controls" style="margin-top: 8px;">
                            <button class="play-animation-btn" id="enhanced-phi-expr-3d-play-btn" title="播放动画"><i class="fas fa-play"></i> 播放动画</button>
                            <button class="stop-animation-btn" id="enhanced-phi-expr-3d-stop-btn" style="display:none;" title="停止动画"><i class="fas fa-pause"></i> 停止动画</button>
                        </div>
                    </div>
                    <div class="parameter-description">调整t值可以实时预览相位变化，或点击播放按钮查看动态效果</div>
                </div>
                        </div>
                        <div class="parameter-item">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="3d_range_label">三维显示范围</span></div>
                            <div class="parameter-input">
                                <div class="range-row">
                                    <label>X: </label>
                                    <input type="number" id="enhanced_x_min_3d" value="0" min="0" max="100" step="0.1"> ~ 
                                    <input type="number" id="enhanced_x_max_3d" value="10" min="0" max="100" step="0.1">
                                </div>
                                <div class="range-row">
                                    <label>Y: </label>
                                    <input type="number" id="enhanced_y_min_3d" value="0" min="0" max="100" step="0.1"> ~ 
                                    <input type="number" id="enhanced_y_max_3d" value="10" min="0" max="100" step="0.1">
                                </div>
                                <div class="range-row">
                                    <label>Z: </label>
                                    <input type="number" id="enhanced_z_min_3d" value="0" min="0" max="100" step="0.1"> ~ 
                                    <input type="number" id="enhanced_z_max_3d" value="10" min="0" max="100" step="0.1">
                                </div>
                            </div>
                            <div class="parameter-description" data-i18n="3d_range_description">三维分布显示范围，单位：μm</div>
                        </div>
                    </div>
                    
                    <!-- 增强DILL模型4D动画参数 -->
                    <div class="parameter-group-container" data-title="4D动画参数" data-i18n-title="4d_animation_params">
                        <div class="parameter-item">
                            <div class="parameter-label">
                                <span class="parameter-name">
                                    <i class="fas fa-play-circle"></i> 4D动画控制
                                </span>
                            </div>
                            <div class="parameter-input">
                                <label style="display: block; margin-bottom: 8px;">
                                    <input type="checkbox" id="enable_4d_animation_enhanced_dill" style="margin-right: 8px;">
                                    启用4D时间动画（3D空间+时间维度）
                                </label>
                            </div>
                            <div class="parameter-description">勾选后将生成随时间变化的3D动画，展示光刻胶反应的动态过程</div>
                        </div>
                        
                        <div id="enhanced_dill_4d_time_params" style="display:none; margin-top: 10px; padding: 10px; background: rgba(155, 89, 182, 0.1); border-radius: 5px;">
                            <div class="parameter-item slider-fill">
                                <div class="parameter-label">
                                    <span class="parameter-name">时间范围 (s)</span>
                                    <span class="parameter-value">5</span>
                                </div>
                                <div class="parameter-input">
                                    <label>开始时间: </label>
                                    <input type="number" id="t_start_enhanced_dill" value="0" min="0" max="20" step="0.1" style="width: 80px;">
                                    <label style="margin-left: 10px;">结束时间: </label>
                                    <input type="number" id="t_end_enhanced_dill" value="5" min="0.1" max="20" step="0.1" style="width: 80px;">
                                </div>
                                <div class="parameter-description">4D动画的时间范围，单位：秒</div>
                            </div>
                            
                            <div class="parameter-item slider-fill">
                                <div class="parameter-label">
                                    <span class="parameter-name">时间步数</span>
                                    <span class="parameter-value">20</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" id="time_steps_enhanced_dill" class="slider" min="10" max="50" step="1" value="20">
                                    <input type="number" class="number-input" value="20" min="10" max="50" step="1">
                                </div>
                                <div class="parameter-description">动画帧数，越多越流畅但计算时间越长</div>
                            </div>
                            
                            <div class="parameter-item slider-fill">
                                <div class="parameter-label">
                                    <span class="parameter-name">动画速度 (ms/帧)</span>
                                    <span class="parameter-value">500</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" id="enhanced_dill_animation_speed" class="slider" min="100" max="2000" step="50" value="500">
                                    <input type="number" class="number-input" value="500" min="100" max="2000" step="50">
                                </div>
                                <div class="parameter-description">每帧播放间隔，越小播放越快</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="car-params" class="car-params parameters-grid" style="display:none;">
                    <!-- CAR模型基本参数容器 -->
                    <div class="parameter-group-container" id="car-basic-params-container" data-title="CAR模型基本参数" data-i18n-title="car_basic_params">
                        <!-- 参数1: I_avg -->
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label">
                                <span class="parameter-name">平均入射光强度 (I<sub>avg</sub>)</span>
                                
                                <span class="parameter-value">10</span>
                            </div>
                            <div class="parameter-input">
                                <input type="range" id="car_I_avg" class="slider" min="1" max="100" step="0.1" value="10">
                                <input type="number" class="number-input" value="10" min="1" max="100" step="0.1">
                            </div>
                            <div class="parameter-description" data-i18n="param_desc_car_I_avg">影响光酸生成，强度大=光酸多=反应强，强度小=光酸少=反应弱</div>
                        </div>
                        
                        <!-- 参数2: V -->
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label">
                                <span class="parameter-name">干涉条纹可见度 (V)</span>
                                
                                <span class="parameter-value">0.8</span>
                            </div>
                            <div class="parameter-input">
                                <input type="range" id="car_V" class="slider" min="0" max="1" step="0.01" value="0.8">
                                <input type="number" class="number-input" value="0.8" min="0" max="1" step="0.01">
                            </div>
                            <div class="parameter-description" data-i18n="param_desc_car_V">控制光强对比度，值大=条纹清晰=图案锐利，值小=条纹模糊=图案柔和</div>
                        </div>
                        
                        <!-- 参数3: K -->
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label">
                                <span class="parameter-name">空间频率 (K)</span>
                                
                                <span class="parameter-value">2</span>
                            </div>
                            <div class="parameter-input">
                                <input type="range" id="car_K" class="slider" min="0.1" max="10" step="0.1" value="2">
                                <input type="number" class="number-input" value="2" min="0.1" max="10" step="0.1">
                            </div>
                            <div class="parameter-description" data-i18n="param_desc_car_K">决定条纹周期，值大=条纹密集=分辨率高，值小=条纹稀疏=特征尺寸大</div>
                        </div>
                        
                        <!-- 参数4: t_exp -->
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label">
                                <span class="parameter-name">曝光时间 (t<sub>exp</sub>)</span>
                                
                                <span class="parameter-value">5</span>
                            </div>
                            <div class="parameter-input">
                                                                <input type="range" id="car_t_exp" class="slider" min="0.1" max="1000" step="0.1" value="100">
                  <input type="number" class="number-input" value="100" min="0.1" max="1000" step="0.1">
                            </div>
                            <div class="parameter-description" data-i18n="param_desc_car_t_exp">控制曝光剂量，时间长=剂量大=光酸多，时间短=剂量小=光酸少</div>
                        </div>
                        
                        <!-- 参数5: acid_gen_efficiency -->
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label">
                                <span class="parameter-name">光酸产生效率 (η)</span>
                                
                                <span class="parameter-value">0.5</span>
                            </div>
                            <div class="parameter-input">
                                <input type="range" id="car_acid_gen_efficiency" class="slider" min="0.01" max="1" step="0.01" value="0.5">
                                <input type="number" class="number-input" value="0.5" min="0.01" max="1" step="0.01">
                            </div>
                            <div class="parameter-description" data-i18n="param_desc_car_acid_gen">影响光酸生成效率，值大=转化率高=敏感度高，值小=转化率低=敏感度低</div>
                        </div>
                        
                        <!-- 参数6: diffusion_length -->
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label">
                                <span class="parameter-name">扩散长度 (EPDL)</span>
                                
                                <span class="parameter-value">3</span>
                            </div>
                            <div class="parameter-input">
                                <input type="range" id="car_diffusion_length" class="slider" min="0" max="20" step="0.1" value="3">
                                <input type="number" class="number-input" value="3" min="0" max="20" step="0.1">
                            </div>
                            <div class="parameter-description" data-i18n="param_desc_car_diff">控制扩散阶段，长度大=扩散远=边缘模糊，长度小=扩散近=边缘锐利</div>
                        </div>
                        
                        <!-- 参数7: reaction_rate -->
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label">
                                <span class="parameter-name">反应速率常数 (k)</span>
                                
                                <span class="parameter-value">0.3</span>
                            </div>
                            <div class="parameter-input">
                                <input type="range" id="car_reaction_rate" class="slider" min="0.01" max="1" step="0.01" value="0.3">
                                <input type="number" class="number-input" value="0.3" min="0.01" max="1" step="0.01">
                            </div>
                            <div class="parameter-description" data-i18n="param_desc_car_rate">影响脱保护阶段，速率大=反应快=脱保护多，速率小=反应慢=脱保护少</div>
                        </div>
                        
                        <!-- 参数8: amplification -->
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label">
                                <span class="parameter-name">放大因子 (A)</span>
                                
                                <span class="parameter-value">10</span>
                            </div>
                            <div class="parameter-input">
                                <input type="range" id="car_amplification" class="slider" min="1" max="50" step="0.5" value="10">
                                <input type="number" class="number-input" value="10" min="1" max="50" step="0.5">
                            </div>
                            <div class="parameter-description" data-i18n="param_desc_car_amp">决定化学放大强度，因子大=放大强=敏感度高，因子小=放大弱=敏感度低</div>
                        </div>
                        
                        <!-- 参数9: contrast -->
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label">
                                <span class="parameter-name">对比度因子 (γ)</span>
                                
                                <span class="parameter-value">3</span>
                            </div>
                            <div class="parameter-input">
                                <input type="range" id="car_contrast" class="slider" min="0.1" max="10" step="0.1" value="3">
                                <input type="number" class="number-input" value="3" min="0.1" max="10" step="0.1">
                            </div>
                            <div class="parameter-description" data-i18n="param_desc_car_contrast">控制显影阶段，对比度大=显影锐利=边缘清晰，对比度小=显影柔和=边缘平滑</div>
                        </div>
                    </div>

                    <!-- 修改CAR模型的正弦波类型选择框 -->
                    <div class="parameter-item sine-wave-type-container" id="car-sine-type-container" data-title="波形类型" data-i18n-title="sine_wave_type">
                        <label for="car-sine-type" data-i18n="sine_wave_type_label">正弦波类型：</label>
                        <select id="car-sine-type" class="model-select">
                            <option value="single" selected data-i18n="sine_wave_type_single">一维正弦波</option>
                            <option value="multi" data-i18n="sine_wave_type_multi">二维正弦波</option>
                            <option value="3d" data-i18n="sine_wave_type_3d">三维正弦波</option>
                        </select>
                    </div>
                    <div id="car-multisine-params" class="sine-wave-params-container" data-title="二维波形参数" data-i18n-title="twod_sine_wave_params" style="display:none;">
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="kx_label">Kx (空间频率x)</span></div>
                            <div class="parameter-input"><input type="number" id="car_Kx" value="2" min="0.1" max="10" step="0.1"></div>
                            <div class="parameter-description" data-i18n="kx_description">控制x方向条纹密度，值大=条纹密集，值小=条纹稀疏</div>
                        </div>
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="ky_label">Ky (空间频率y)</span></div>
                            <div class="parameter-input"><input type="number" id="car_Ky" value="1" min="0.1" max="100" step="0.1"></div>
                            <div class="parameter-description" data-i18n="ky_description">控制y方向条纹密度，值大=条纹密集，值小=条纹稀疏</div>
                        </div>
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="phi_label">φ(t) (相位表达式)</span></div>
                            <div class="parameter-input phi-expr-container">
                                <select id="car_phi_expr_select" class="phi-expr-select" title="选择常用相位表达式或使用自定义表达式">
                                    <option value="custom" data-i18n="phi_expr_custom">自定义输入</option>
                                    <option value="0" selected data-i18n="phi_expr_constant">常量: 0</option>
                                    <option value="0.5*t" data-i18n="phi_expr_linear">线性变化: 0.5*t</option>
                                    <option value="sin(t)" data-i18n="phi_expr_sin">正弦变化: sin(t)</option>
                                    <option value="cos(t)" data-i18n="phi_expr_cos">余弦变化: cos(t)</option>
                                    <option value="sin(2*PI*t)" data-i18n="phi_expr_sin_2pi">正弦周期变化: sin(2*PI*t)</option>
                                    <option value="0.2*t*t" data-i18n="phi_expr_quadratic">二次变化: 0.2*t*t</option>
                                    <option value="t*sin(2*PI*t)" data-i18n="phi_expr_complex1">复合函数: t*sin(2*PI*t)</option>
                                    <option value="exp(-0.1*t)*sin(t)" data-i18n="phi_expr_complex2">衰减正弦: exp(-0.1*t)*sin(t)</option>
                                    <option value="PI/4" data-i18n="phi_expr_pi4">固定相位: PI/4</option>
                                </select>
                                <i class="fas fa-question-circle phi-expr-help-icon"></i>
                                <div class="phi-expr-tooltip" data-i18n="phi_expr_help">支持数学函数: sin, cos, tan, exp, abs, sqrt, PI, E</div>
                                <input type="text" id="car_phi_expr" value="0" class="phi-expr-input" placeholder="输入相位表达式，可使用t,PI,sin,cos,exp等函数">
                            </div>
                                            <div class="phi-expr-error" style="color:#d00;font-size:0.95em;display:none;"></div>
                <button id="car-phi-expr-preview-btn" class="preview-button" style="margin-top:4px;display:none;">预览分布</button>
                <div id="car-phi-expr-preview-plot" class="preview-plot preview-plot-2d" style="margin-top:8px;display:none;"></div>
                <!-- CAR模型 t值滑块和动态预览控制 -->
                <div id="car-phi-expr-preview-controls" class="phase-preview-controls" style="margin-top: 10px; padding: 10px; background: rgba(230, 126, 34, 0.1); border-radius: 4px; display: none;">
                    <div class="parameter-label">
                        <span class="parameter-name">t值 (相位参数)</span>
                        <span class="parameter-value t-value">0</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="t-slider slider" id="car-phi-expr-t-slider" min="0" max="6.28" step="0.01" value="0" title="t值滑块">
                        <div class="animation-controls" style="margin-top: 8px;">
                            <button class="play-animation-btn" id="car-phi-expr-play-btn" title="播放动画"><i class="fas fa-play"></i> 播放动画</button>
                            <button class="stop-animation-btn" id="car-phi-expr-stop-btn" style="display:none;" title="停止动画"><i class="fas fa-pause"></i> 停止动画</button>
                        </div>
                    </div>
                    <div class="parameter-description">调整t值可以实时预览相位变化，或点击播放按钮查看动态效果</div>
                </div>
                        </div>
                        <!-- Y范围参数，放在容器内部 -->
                        <div class="parameter-item">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="y_range_label">y范围 (μm)：</span></div>
                            <div class="parameter-input">
                                <input type="number" id="car_y_min" value="0" min="0" max="100" step="0.1"> ~
                                <input type="number" id="car_y_max" value="10" min="0" max="100" step="0.1">
                                <label data-i18n="y_resolution_label">分辨率：</label>
                                <input type="number" id="car_y_points" value="100" min="1" max="200" step="1">
                            </div>
                            <div class="parameter-description" data-i18n="y_range_description">二维分布时有效，y_min=y_max表示一维，y范围0~100，分辨率1~200</div>
                        </div>
                    </div>

                    <!-- 添加CAR模型的三维正弦波参数输入区域 -->
                    <div id="car-3dsine-params" class="sine-wave-params-container" data-title="三维波形参数" data-i18n-title="3d_sine_wave_params" style="display:none;">
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="car_kx_label">Kx (空间频率x)</span></div>
                            <div class="parameter-input"><input type="number" id="car_Kx_3d" value="2" min="0.1" max="10" step="0.1"></div>
                            <div class="parameter-description" data-i18n="car_kx_description">控制x方向条纹密度，值大=条纹密集，值小=条纹稀疏</div>
                        </div>
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="car_ky_label">Ky (空间频率y)</span></div>
                            <div class="parameter-input"><input type="number" id="car_Ky_3d" value="1" min="0.1" max="10" step="0.1"></div>
                            <div class="parameter-description" data-i18n="car_ky_description">控制y方向条纹密度，值大=条纹密集，值小=条纹稀疏</div>
                        </div>
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="car_kz_label">Kz (空间频率z)</span></div>
                            <div class="parameter-input"><input type="number" id="car_Kz_3d" value="1" min="0.1" max="10" step="0.1"></div>
                            <div class="parameter-description" data-i18n="car_kz_description">控制z方向条纹密度，值大=条纹密集，值小=条纹稀疏</div>
                        </div>
                        <div class="parameter-item slider-fill">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="car_phi_label">φ(t) (相位表达式)</span></div>
                            <div class="parameter-input phi-expr-container">
                                <select id="car_phi_expr_3d_select" class="phi-expr-select" title="选择常用相位表达式或使用自定义表达式">
                                    <option value="custom" data-i18n="phi_expr_custom">自定义输入</option>
                                    <option value="0" data-i18n="phi_expr_constant">常量: 0</option>
                                    <option value="0.5*t" data-i18n="phi_expr_linear">线性变化: 0.5*t</option>
                                    <option value="sin(t)" selected data-i18n="phi_expr_sin">正弦变化: sin(t)</option>
                                    <option value="cos(t)" data-i18n="phi_expr_cos">余弦变化: cos(t)</option>
                                    <option value="sin(2*PI*t)" data-i18n="phi_expr_sin_2pi">正弦周期变化: sin(2*PI*t)</option>
                                    <option value="0.2*t*t" data-i18n="phi_expr_quadratic">二次变化: 0.2*t*t</option>
                                    <option value="t*sin(2*PI*t)" data-i18n="phi_expr_complex1">复合函数: t*sin(2*PI*t)</option>
                                    <option value="exp(-0.1*t)*sin(t)" data-i18n="phi_expr_complex2">衰减正弦: exp(-0.1*t)*sin(t)</option>
                                    <option value="PI/4" data-i18n="phi_expr_pi4">固定相位: PI/4</option>
                                </select>
                                <i class="fas fa-question-circle phi-expr-help-icon"></i>
                                <div class="phi-expr-tooltip" data-i18n="phi_expr_help">支持数学函数: sin, cos, tan, exp, abs, sqrt, PI, E</div>
                                <input type="text" id="car_phi_expr_3d" value="sin(t)" class="phi-expr-input" placeholder="输入相位表达式，可使用t,PI,sin,cos,exp等函数">
                            </div>
                                            <div class="phi-expr-error" style="color:#d00;font-size:0.95em;display:none;"></div>
                <button id="car-phi-expr-3d-preview-btn" class="preview-button" style="margin-top:4px;display:none;">预览3D分布</button>
                <div id="car-phi-expr-3d-preview-plot" class="preview-plot preview-plot-3d" style="margin-top:8px;display:none;"></div>
                <!-- CAR模型 3D t值滑块和动态预览控制 -->
                <div id="car-phi-expr-3d-preview-controls" class="phase-preview-controls" style="margin-top: 10px; padding: 10px; background: rgba(230, 126, 34, 0.1); border-radius: 4px; display: none;">
                    <div class="parameter-label">
                        <span class="parameter-name">t值 (相位参数)</span>
                        <span class="parameter-value t-value">0</span>
                    </div>
                    <div class="parameter-input">
                        <input type="range" class="t-slider slider" id="car-phi-expr-3d-t-slider" min="0" max="6.28" step="0.01" value="0" title="t值滑块">
                        <div class="animation-controls" style="margin-top: 8px;">
                            <button class="play-animation-btn" id="car-phi-expr-3d-play-btn" title="播放动画"><i class="fas fa-play"></i> 播放动画</button>
                            <button class="stop-animation-btn" id="car-phi-expr-3d-stop-btn" style="display:none;" title="停止动画"><i class="fas fa-pause"></i> 停止动画</button>
                        </div>
                    </div>
                    <div class="parameter-description">调整t值可以实时预览相位变化，或点击播放按钮查看动态效果</div>
                </div>
                        </div>
                        <div class="parameter-item">
                            <div class="parameter-label"><span class="parameter-name" data-i18n="car_3d_range_label">三维显示范围</span></div>
                            <div class="parameter-input">
                                <div class="range-row">
                                    <label>X: </label>
                                    <input type="number" id="car_x_min_3d" value="0" min="0" max="100" step="0.1"> ~ 
                                    <input type="number" id="car_x_max_3d" value="10" min="0" max="100" step="0.1">
                                </div>
                                <div class="range-row">
                                    <label>Y: </label>
                                    <input type="number" id="car_y_min_3d" value="0" min="0" max="100" step="0.1"> ~ 
                                    <input type="number" id="car_y_max_3d" value="10" min="0" max="100" step="0.1">
                                </div>
                                <div class="range-row">
                                    <label>Z: </label>
                                    <input type="number" id="car_z_min_3d" value="0" min="0" max="100" step="0.1"> ~ 
                                    <input type="number" id="car_z_max_3d" value="10" min="0" max="100" step="0.1">
                                </div>
                            </div>
                            <div class="parameter-description" data-i18n="car_3d_range_description">三维分布显示范围，单位：μm</div>
                        </div>
                        
                        <!-- 4D动画控制参数 -->
                        <div class="parameter-item" style="border-top: 2px solid #e0e0e0; padding-top: 15px; margin-top: 15px;">
                            <div class="parameter-label">
                                <span class="parameter-name" style="color: #e67e22; font-weight: 600;">
                                    <i class="fas fa-play-circle"></i> 4D动画控制
                                </span>
                            </div>
                            <div class="parameter-input">
                                <label style="display: block; margin-bottom: 8px;">
                                    <input type="checkbox" id="car_enable_4d_animation" style="margin-right: 8px;">
                                    启用4D时间动画（3D空间+时间维度）
                                </label>
                            </div>
                            <div class="parameter-description">勾选后将生成随时间变化的3D动画，展示光刻胶反应的动态过程</div>
                        </div>
                        
                        <div id="car-4d-params" style="display:none; margin-top: 10px; padding: 10px; background: rgba(230, 126, 34, 0.1); border-radius: 5px;">
                            <div class="parameter-item slider-fill">
                                <div class="parameter-label">
                                    <span class="parameter-name">时间范围 (s)</span>
                                    <span class="parameter-value">5</span>
                                </div>
                                <div class="parameter-input">
                                    <label>开始时间: </label>
                                    <input type="number" id="car_t_start" value="0" min="0" max="20" step="0.1" style="width: 80px;">
                                    <label style="margin-left: 10px;">结束时间: </label>
                                    <input type="number" id="car_t_end" value="5" min="0.1" max="20" step="0.1" style="width: 80px;">
                                </div>
                                <div class="parameter-description">4D动画的时间范围，单位：秒</div>
                            </div>
                            
                            <div class="parameter-item slider-fill">
                                <div class="parameter-label">
                                    <span class="parameter-name">时间步数</span>
                                    <span class="parameter-value">20</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" id="car_time_steps" class="slider" min="10" max="50" step="1" value="20">
                                    <input type="number" class="number-input" value="20" min="10" max="50" step="1">
                                </div>
                                <div class="parameter-description">动画帧数，越多越流畅但计算时间越长</div>
                            </div>
                            
                            <div class="parameter-item slider-fill">
                                <div class="parameter-label">
                                    <span class="parameter-name">动画速度 (ms/帧)</span>
                                    <span class="parameter-value">500</span>
                                </div>
                                <div class="parameter-input">
                                    <input type="range" id="car_animation_speed" class="slider" min="100" max="2000" step="50" value="500">
                                    <input type="number" class="number-input" value="500" min="100" max="2000" step="50">
                                </div>
                                <div class="parameter-description">每帧播放间隔，越小播放越快</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="button-container">
                    <button id="calculate-btn" class="calculate-btn" data-i18n="calculate">计算</button>
                </div>
            </section>
            
            <!-- 结果展示区域 -->
            <section id="results-section" class="results-section">
                <div class="section-header">
                    <h2 class="section-title" data-i18n="result_section">计算结果</h2>
                    <button id="view-logs-btn" class="view-logs-btn" title="查看详细计算日志" data-i18n-title="view_logs_title">
                        <i class="fas fa-file-alt"></i>
                        <span data-i18n="view_logs">查看日志</span>
                    </button>
                </div>
                
                <div class="plots-container">
                    <!-- 新增(X, Y)平面曝光剂量热力图 -->
                    <div class="plot-item" id="exposure-xy-plot-item" style="display:none;">
                        <h3 class="plot-title">曝光计量分布 (2D) (X, Y平面)</h3>
                        <div id="exposure-xy-plot-container" class="plot-container"></div>
                        <div class="plot-export-btns">
                            <button id="export-exposure-xy-img">导出图片</button>
                            <button id="export-exposure-xy-data">导出数据</button>
                        </div>
                    </div>
                    
                    <!-- 新增(X, Y)平面光刻胶厚度热力图 -->
                    <div class="plot-item" id="thickness-xy-plot-item" style="display:none;">
                        <h3 class="plot-title">光刻胶厚度分布 (2D) (X, Y平面)</h3>
                        <div id="thickness-xy-plot-container" class="plot-container"></div>
                        <div class="plot-export-btns">
                            <button id="export-thickness-xy-img">导出图片</button>
                            <button id="export-thickness-xy-data">导出数据</button>
                        </div>
                    </div>

                    <!-- 曝光剂量分布图 -->
                    <div class="plot-item">
                        <h3 class="plot-title" data-i18n="exposure_dist">光强分布 (1D)</h3>
                        <div id="exposure-plot-container" class="plot-container"></div>
                        <!-- 阈值控制模块已注释掉 -->
                        <!-- <div class="individual-threshold-controls threshold-analysis-hint" id="exposure-thresholds-container">
                          <div class="threshold-control" data-idx="0">
                            <span class="threshold-label-text">曝光剂量阈值:</span>
                            <input type="range" class="threshold-slider" min="10" max="200" step="1" value="80" title="曝光剂量阈值滑块" aria-label="曝光剂量阈值">
                            <span class="threshold-value-text">80 mJ/cm²</span>
                            <button class="toggle-threshold-visibility-btn">显示</button>
                          </div>
                        </div> -->
                        <!-- 坐标轴控制面板已移除 -->
                        <div class="plot-export-btns">
                            <button id="export-exposure-img" data-i18n="export_img">导出图片</button>
                            <button id="export-exposure-data" data-i18n="export_data">导出数据</button>
                        </div>
                        <!-- 保留原有图像作为后备 -->
                        <img id="exposure-plot" class="plot-image" style="display: none;" src="" alt="曝光剂量分布图">
                    </div>
                    
                    <!-- 刻蚀深度分布图 -->
                    <div class="plot-item">
                        <h3 class="plot-title" data-i18n="thickness_dist">刻蚀深度分布 (1D)</h3>
                        <div id="thickness-plot-container" class="plot-container"></div>
                        <!-- 阈值控制模块已注释掉 -->
                        <!-- <div class="individual-threshold-controls threshold-analysis-hint" id="thickness-thresholds-container">
                          <div class="threshold-control" data-idx="0">
                            <span class="threshold-label-text">厚度阈值:</span>
                            <input type="range" class="threshold-slider" min="0" max="1" step="0.01" value="0.3" title="厚度阈值滑块" aria-label="厚度阈值">
                            <span class="threshold-value-text">0.3</span>
                            <button class="toggle-threshold-visibility-btn">显示</button>
                          </div>
                        </div> -->
                        <!-- 坐标轴控制面板已移除 -->
                        <div class="plot-export-btns">
                            <button id="export-thickness-img" data-i18n="export_img">导出图片</button>
                            <button id="export-thickness-data" data-i18n="export_data">导出数据</button>
                        </div>
                        <!-- 保留原有图像作为后备 -->
                        <img id="thickness-plot" class="plot-image" style="display: none;" src="" alt="刻蚀深度分布图">
                    </div>

                    <!-- 结果区增加二维热力图展示区域 -->
                    <div class="plot-item" id="heatmap-plot-item" style="display:none;">
                        <h3 class="plot-title" data-i18n="heatmap_plot_title">二维分布热力图</h3>
                        <div id="heatmap-plot-container" class="plot-container"></div>
                        <button id="export-heatmap-data" data-i18n="export_heatmap_data_btn">导出二维数据</button>
                    </div>

                    <!-- 薄胶1D时间动画控制区域 -->
                    <div id="dill-1d-animation-section" style="display: none;">
                        <h2 class="section-title">
                            <i class="fas fa-play-circle" style="color: #2980b9;"></i>
                            薄胶1D动画（曝光时间变化）
                        </h2>
                        <div class="animation-controls">
                            <div class="animation-control-panel">
                                <button id="dill-1d-play-btn" class="animation-btn play-btn" title="播放动画">
                                    <i class="fas fa-play"></i> 播放
                                </button>
                                <button id="dill-1d-pause-btn" class="animation-btn pause-btn" title="暂停动画" style="display:none;">
                                    <i class="fas fa-pause"></i> 暂停
                                </button>
                                <button id="dill-1d-reset-btn" class="animation-btn reset-btn" title="重置动画">
                                    <i class="fas fa-undo"></i> 重置
                                </button>
                                <button id="dill-1d-loop-btn" class="animation-btn loop-btn loop-off" title="开启循环播放">
                                    <i class="fas fa-sync-alt"></i> <span>开启循环</span>
                                </button>
                                <div id="dill-1d-animation-status" class="animation-status status-stopped">
                                    <i class="fas fa-circle"></i> 就绪
                                </div>
                            </div>
                            <div class="animation-time-control">
                                <div class="time-slider-container">
                                    <div class="time-info-display">
                                        <span id="dill-1d-time-display">t = 0.10s</span>
                                        <span id="dill-1d-frame-info">帧 1/500</span>
                                    </div>
                                    <input type="range" id="dill-1d-time-slider" class="time-slider" min="0" max="4999" value="0" step="1">
                                </div>
                            </div>
                        </div>
                        <div id="dill-1d-animation-container">
                            <!-- 1D时间动画图表 -->
                            <div class="plot-container">
                                <div id="dill-exposure-1d-plot" class="plot-area" style="height: 400px; width: 100%; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 20px;">
                                    <div class="plot-placeholder">
                                        <i class="fas fa-chart-line" style="font-size: 48px; color: #ccc;"></i>
                                        <p style="color: #999; margin-top: 10px;">曝光剂量分布将在这里显示</p>
                                    </div>
                                </div>
                            </div>
                            <div class="plot-container">
                                <div id="dill-thickness-1d-plot" class="plot-area" style="height: 400px; width: 100%; border: 1px solid #ddd; border-radius: 8px;">
                                    <div class="plot-placeholder">
                                        <i class="fas fa-chart-area" style="font-size: 48px; color: #ccc;"></i>
                                        <p style="color: #999; margin-top: 10px;">刻蚀深度分布将在这里显示</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 薄胶1D V（对比度）评估控制区域 -->
                <div id="dill-1d-v-evaluation-section" style="display: none;">
                    <h2 class="section-title">
                        <i class="fas fa-chart-line" style="color: #f39c12;"></i>
                        薄胶1D动画（对比度变化分析）
                    </h2>
                    <div class="animation-controls">
                        <div class="animation-control-panel">
                            <button id="dill-1d-v-play-btn" class="animation-btn play-btn" title="播放V评估">
                                <i class="fas fa-play"></i> 播放
                            </button>
                            <button id="dill-1d-v-pause-btn" class="animation-btn pause-btn" title="暂停V评估" style="display:none;">
                                <i class="fas fa-pause"></i> 暂停
                            </button>
                            <button id="dill-1d-v-reset-btn" class="animation-btn reset-btn" title="重置V评估">
                                <i class="fas fa-undo"></i> 重置
                            </button>
                            <button id="dill-1d-v-loop-btn" class="animation-btn loop-btn loop-off" title="开启循环播放">
                                <i class="fas fa-sync-alt"></i> <span>开启循环</span>
                            </button>
                            <div id="dill-1d-v-evaluation-status" class="animation-status status-stopped">
                                <i class="fas fa-circle"></i> 就绪
                            </div>
                        </div>
                        <div class="animation-time-control">
                            <div class="time-slider-container">
                                <div class="time-info-display">
                                    <span id="dill-1d-v-display">V = 0.10</span>
                                    <span id="dill-1d-v-frame-info">帧 1/500</span>
                                </div>
                                <input type="range" id="dill-1d-v-slider" class="time-slider" min="0" max="4999" value="0" step="1">
                            </div>
                        </div>
                    </div>
                    <div id="dill-1d-v-evaluation-container">
                        <!-- 前两个图表左右横向排列 -->
                        <div class="v-evaluation-horizontal-plots" style="display: flex; gap: 20px; margin-bottom: 20px;">
                            <!-- 1D V评估曝光剂量图表 -->
                            <div class="plot-container" style="flex: 1;">
                                <div id="dill-v-exposure-1d-plot" class="plot-area" style="height: 400px; width: 100%; border: 1px solid #ddd; border-radius: 8px;">
                                    <div class="plot-placeholder">
                                        <i class="fas fa-chart-line" style="font-size: 48px; color: #ccc;"></i>
                                        <p style="color: #999; margin-top: 10px;">V值变化的曝光剂量分布将在这里显示</p>
                                    </div>
                                </div>
                            </div>
                            <!-- 1D V评估厚度图表 -->
                            <div class="plot-container" style="flex: 1;">
                                <div id="dill-v-thickness-1d-plot" class="plot-area" style="height: 400px; width: 100%; border: 1px solid #ddd; border-radius: 8px;">
                                    <div class="plot-placeholder">
                                        <i class="fas fa-chart-area" style="font-size: 48px; color: #ccc;"></i>
                                        <p style="color: #999; margin-top: 10px;">V值变化的刻蚀深度分布将在这里显示</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- V评估比较图表（单独一行） -->
                        <div class="plot-container">
                            <div id="dill-v-comparison-plot" class="plot-area" style="height: 400px; width: 100%; border: 1px solid #ddd; border-radius: 8px;">
                                <div class="plot-placeholder">
                                    <i class="fas fa-chart-bar" style="font-size: 48px; color: #ccc;"></i>
                                    <p style="color: #999; margin-top: 10px;">不同V值的对比分析将在这里显示</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Dill 4D动画区域 -->
                <div id="dill-4d-animation-section" class="car-4d-animation-section" style="display: none;">
                    <h2 class="section-title">
                        <i class="fas fa-play-circle" style="color: #3498db;"></i>
                        Dill模型4D动画（3D空间+时间维度）
                    </h2>
                    <div class="animation-controls">
                        <div class="animation-control-panel">
                            <button id="dill-4d-play-btn" class="animation-btn play-btn" title="播放动画">
                                <i class="fas fa-play"></i> 播放
                            </button>
                            <button id="dill-4d-pause-btn" class="animation-btn pause-btn" title="暂停动画" style="display:none;">
                                <i class="fas fa-pause"></i> 暂停
                            </button>
                            <button id="dill-4d-reset-btn" class="animation-btn reset-btn" title="重置动画">
                                <i class="fas fa-undo"></i> 重置
                            </button>
                            <button id="dill-4d-loop-btn" class="animation-btn loop-btn loop-off" title="开启循环播放">
                                <i class="fas fa-sync-alt"></i> <span>开启循环</span>
                            </button>
                            <div class="animation-status status-stopped">
                                <i class="fas fa-circle"></i> 就绪
                            </div>
                        </div>
                        <div class="animation-time-control">
                            <div class="time-slider-container">
                                <div class="time-info-display">
                                    <span id="dill-4d-time-display">t = 0.00s</span>
                                    <span id="dill-4d-frame-info">帧 1/20</span>
                                </div>
                                <input type="range" id="dill-4d-time-slider" class="time-slider" min="0" max="19" value="0" step="1">
                            </div>
                        </div>
                    </div>
                    <div id="dill-4d-animation-container" class="car-4d-plots-grid">
                        <!-- 4D动画图表将在这里动态生成 -->
                    </div>
                </div>

                <!-- Enhanced Dill 4D动画区域 -->
                <div id="enhanced-dill-4d-animation-section" class="car-4d-animation-section" style="display: none;">
                    <h2 class="section-title">
                        <i class="fas fa-play-circle" style="color: #9b59b6;"></i>
                        增强Dill模型4D动画（3D空间+时间维度）
                    </h2>
                    <div class="animation-controls">
                        <div class="animation-control-panel">
                            <button id="enhanced-dill-4d-play-btn" class="animation-btn play-btn" title="播放动画">
                                <i class="fas fa-play"></i> 播放
                            </button>
                            <button id="enhanced-dill-4d-pause-btn" class="animation-btn pause-btn" title="暂停动画" style="display:none;">
                                <i class="fas fa-pause"></i> 暂停
                            </button>
                            <button id="enhanced-dill-4d-reset-btn" class="animation-btn reset-btn" title="重置动画">
                                <i class="fas fa-undo"></i> 重置
                            </button>
                            <button id="enhanced-dill-4d-loop-btn" class="animation-btn loop-btn loop-off" title="开启循环播放">
                                <i class="fas fa-sync-alt"></i> <span>开启循环</span>
                            </button>
                            <div class="animation-status status-stopped">
                                <i class="fas fa-circle"></i> 就绪
                            </div>
                        </div>
                        <div class="animation-time-control">
                            <div class="time-slider-container">
                                <div class="time-info-display">
                                    <span id="enhanced-dill-4d-time-display">t = 0.00s</span>
                                    <span id="enhanced-dill-4d-frame-info">帧 1/20</span>
                                </div>
                                <input type="range" id="enhanced-dill-4d-time-slider" class="time-slider" min="0" max="19" value="0" step="1">
                            </div>
                        </div>
                    </div>
                    <div id="enhanced-dill-4d-animation-container" class="car-4d-plots-grid">
                        <!-- 4D动画图表将在这里动态生成 -->
                    </div>
                </div>

                <!-- CAR模型4D动画区域 -->
                <div id="car-4d-animation-section" class="car-4d-animation-section" style="display: none;">
                    <h2 class="section-title">
                        <i class="fas fa-play-circle" style="color: #e67e22;"></i>
                        CAR模型4D动画（3D空间+时间维度）
                    </h2>
                    <div class="animation-controls">
                        <div class="animation-control-panel">
                            <button id="car-4d-play-btn" class="animation-btn play-btn" title="播放动画">
                                <i class="fas fa-play"></i> 播放
                            </button>
                            <button id="car-4d-pause-btn" class="animation-btn pause-btn" title="暂停动画" style="display:none;">
                                <i class="fas fa-pause"></i> 暂停
                            </button>
                            <button id="car-4d-reset-btn" class="animation-btn reset-btn" title="重置动画">
                                <i class="fas fa-undo"></i> 重置
                            </button>
                            <button id="car-4d-loop-btn" class="animation-btn loop-btn" title="切换循环播放">
                                <i class="fas fa-sync-alt"></i> <span>关闭循环</span>
                            </button>
                            <div class="animation-status status-stopped">
                                <i class="fas fa-circle"></i> 就绪
                            </div>
                        </div>
                        <div class="animation-time-control">
                            <div class="time-slider-container">
                                <div class="time-info-display">
                                    <span id="car-4d-time-display">t = 0.00s</span>
                                    <span id="car-4d-frame-info">帧 1/20</span>
                                </div>
                                <input type="range" id="car-4d-time-slider" class="time-slider" min="0" max="19" value="0" step="1">
                            </div>
                        </div>
                    </div>
                    <div id="car-4d-animation-container" class="car-4d-plots-grid">
                        <!-- 4D动画图表将在这里动态生成 -->
                    </div>
                </div>

                <!-- CAR模型交互式图表区域 -->
                <div id="car-interactive-plots" class="car-results-container" style="display: none;"></div>
                <div id="car-results" class="car-results-container" style="display: none;"></div>
            </section>
        </div>
    </main>
    
    <!-- 日志查看弹窗 -->
    <div id="logs-modal" class="modal" aria-modal="true" role="dialog">
        <div class="modal-content logs-modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-file-alt"></i> 计算运行日志
                </h3>
                <div class="modal-controls">
                    <select id="log-model-filter" class="log-filter-select" title="过滤模型类型" aria-label="过滤模型类型">
                        <option value="">所有模型</option>
                        <option value="dill">Dill模型</option>
                        <option value="enhanced_dill">Enhanced Dill模型</option>
                        <option value="car">CAR模型</option>
                        <option value="system">系统</option>
                    </select>
                    <select id="log-type-filter" class="log-filter-select" title="过滤日志类型" aria-label="过滤日志类型">
                        <option value="">所有类型</option>
                        <optgroup label="基本类型">
                            <option value="info">信息</option>
                            <option value="success">成功</option>
                            <option value="warning">警告</option>
                            <option value="error">错误</option>
                        </optgroup>
                        <optgroup label="操作类型">
                            <option value="data_received">数据接收</option>
                            <option value="data_processing">数据处理</option>
                            <option value="parameter">参数配置</option>
                            <option value="calculation">计算过程</option>
                            <option value="result">结果输出</option>
                            <option value="validation">验证检测</option>
                        </optgroup>
                        <optgroup label="系统类型">
                            <option value="system">系统信息</option>
                            <option value="performance">性能监控</option>
                            <option value="debug">调试信息</option>
                            <option value="progress">进度更新</option>
                        </optgroup>
                    </select>
                    <input type="text" id="log-search-input" class="log-search-input" placeholder="搜索日志内容..." title="搜索日志内容" aria-label="搜索日志内容">
                    <button id="refresh-logs-btn" class="log-control-btn" title="刷新日志">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                    <button id="clear-logs-btn" class="log-control-btn" title="清空日志">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button id="export-logs-btn" class="log-control-btn" title="导出日志">
                        <i class="fas fa-download"></i>
                    </button>
                    <button id="close-logs-modal" class="close-modal-btn" title="关闭">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="modal-body">
                <div id="logs-container" class="logs-container">
                    <div class="logs-loading">
                        <i class="fas fa-spinner fa-spin"></i> 加载日志中...
                    </div>
                </div>
            </div>
            <div class="logs-stats">
                <span id="logs-count-info" class="logs-count">总计: 0 条日志</span>
            </div>
        </div>
    </div>
    
    <!-- 页脚 -->
    <footer class="professional-footer">
        <div class="footer-main">
            <div class="footer-content">
                <div class="footer-section company-section">
                    <div class="footer-logo">
                        <i class="fas fa-atom"></i>
                        <span data-i18n="footer_brand">光刻胶建模平台</span>
                    </div>
                    <p class="footer-description" data-i18n="footer_desc">
                        基于先进的数学模型和计算方法，为半导体制造业提供专业的光刻胶建模与仿真解决方案。
                    </p>
                    <div class="footer-badges">
                        <span class="badge" data-i18n="badge_research">科研级</span>
                        <span class="badge" data-i18n="badge_professional">专业版</span>
                        <span class="badge" data-i18n="badge_verified">已验证</span>
                    </div>
                    
                    <!-- 添加页脚LOGO区域 - 放在徽章下方 -->
                    <div class="footer-logos">
                        <img src="assets/images/LOGO.avif" alt="香港大学校徽" class="footer-university-logo" title="香港大学">
                        <img src="assets/images/Dept new logo.avif" alt="学院LOGO" class="footer-department-logo" title="机械工程系">
                    </div>
                </div>
                <div class="footer-section links-section">
                    <h4 class="footer-title" data-i18n="footer_platform">平台功能</h4>
                    <ul class="footer-links">
                        <li><a href="index.html" data-i18n="footer_single">单一模型计算</a></li>
                        <li><a href="compare.html" data-i18n="footer_compare">参数对比分析</a></li>
                        <li><a href="../matrix_visualization/" data-i18n="footer_matrix">矩阵可视化</a></li>
                        <li><a href="#" data-i18n="footer_documentation">使用文档</a></li>
                    </ul>
                </div>
                <div class="footer-section models-section">
                    <h4 class="footer-title" data-i18n="footer_models">支持模型</h4>
                    <ul class="footer-links">
                        <li><span class="model-badge dill">Dill</span> <span data-i18n="footer_dill">薄胶模型</span></li>
                        <li><span class="model-badge enhanced">Enhanced</span> <span data-i18n="footer_enhanced">厚胶模型</span></li>
                        <li><span class="model-badge car">CAR</span> <span data-i18n="footer_car">化学放大模型</span></li>
                        <li><span class="model-badge custom">Custom</span> <span data-i18n="footer_custom">自定义模型</span></li>
                    </ul>
                </div>
                <div class="footer-section contact-section">
                    <h4 class="footer-title" data-i18n="footer_contact">联系我们</h4>
                    <div class="contact-info">
                        <div class="contact-item">
                            <i class="fas fa-university"></i>
                            <span data-i18n="footer_university">香港大学</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-envelope"></i>
                            <span>mech@hku.hk</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-phone"></i>
                            <span>Tel: (852) 3917 2635</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-fax"></i>
                            <span>Fax: (852) 2858 5415</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-globe-asia"></i>
                            <a href="https://mech.hku.hk/" target="_blank" rel="noopener" style="color: inherit; text-decoration: none;">mech.hku.hk</a>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-code-branch"></i>
                            <span data-i18n="footer_version">版本 v2.1.0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="footer-bottom-content">
                <div class="copyright">
                    <p>&copy; 2025 <strong data-i18n="footer_copyright_org">香港大学光刻胶建模研究中心</strong>. <span data-i18n="footer_rights">保留所有权利</span>.</p>
                </div>
                <div class="footer-meta">
                    <a href="https://mech.hku.hk/blank" target="_blank" rel="noopener" class="footer-link" data-i18n="footer_privacy">隐私政策</a>
                    <span class="footer-separator">|</span>
                    <a href="https://mech.hku.hk/safety" target="_blank" rel="noopener" class="footer-link" data-i18n="footer_terms">安全政策</a>
                    <span class="footer-separator">|</span>
                    <a href="#" class="footer-link" data-i18n="footer_support">技术支持</a>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- 引入JavaScript文件 -->
    <script src="js/common.js?v=1.0"></script>
    <script src="js/lang.js"></script>
    <script src="js/main.js?v=1.1"></script>
    <script src="js/car-model.js?v=1.0"></script>
    <script src="js/logs-manager.js"></script>
    <script>
    // 模型切换逻辑
    const modelSelect = document.getElementById('model-select');
    const dillDesc = document.getElementById('dill-desc');
    const enhancedDillDesc = document.getElementById('enhanced-dill-desc');
    const carDesc = document.getElementById('car-desc');
    const dillParams = document.getElementById('dill-params');
    const enhancedDillParams = document.getElementById('enhanced-dill-params');
    const carParams = document.getElementById('car-params');
    const carInteractivePlots = document.getElementById('car-interactive-plots');
    const carResults = document.getElementById('car-results');
    
    // 设置主题颜色函数
    function applyThemeColor(modelType) {
        // 首先移除所有主题类
        document.body.classList.remove('theme-dill', 'theme-enhanced-dill', 'theme-car');
        
        // 然后添加选中的主题类
        if (modelType === 'dill') {
            document.body.classList.add('theme-dill');
        } else if (modelType === 'enhanced_dill') {
            document.body.classList.add('theme-enhanced-dill');
        } else if (modelType === 'car') {
            document.body.classList.add('theme-car');
        }
    }
    
    // 在页面加载时应用默认主题
    document.addEventListener('DOMContentLoaded', function() {
        if (modelSelect) {
            applyThemeColor(modelSelect.value || 'dill');
        }
    });
    
    modelSelect.addEventListener('change', function() {
        if (this.value === 'dill') {
            dillDesc.style.display = 'block';
            enhancedDillDesc.style.display = 'none';
            carDesc.style.display = 'none';
            dillParams.style.display = 'block';
            enhancedDillParams.style.display = 'none';
            carParams.style.display = 'none';
            carInteractivePlots.style.display = 'none';
            carResults.style.display = 'none';
            applyThemeColor('dill'); // 应用Dill模型主题
        } else if (this.value === 'enhanced_dill') {
            dillDesc.style.display = 'none';
            enhancedDillDesc.style.display = 'block';
            carDesc.style.display = 'none';
            dillParams.style.display = 'none';
            enhancedDillParams.style.display = 'block';
            carParams.style.display = 'none';
            carInteractivePlots.style.display = 'none';
            carResults.style.display = 'none';
            applyThemeColor('enhanced_dill'); // 应用增强Dill模型主题
        } else if (this.value === 'car') {
            dillDesc.style.display = 'none';
            enhancedDillDesc.style.display = 'none';
            carDesc.style.display = 'block';
            dillParams.style.display = 'none';
            enhancedDillParams.style.display = 'none';
            carParams.style.display = 'block';
            carInteractivePlots.style.display = 'block';
            carResults.style.display = 'block';
            applyThemeColor('car'); // 应用CAR模型主题
        }
    });
    
    // 展开更多详情按钮事件
    const dillToggleBtn = document.getElementById('dill-toggle-details');
    const enhancedDillToggleBtn = document.getElementById('enhanced-dill-toggle-details');
    const carToggleBtn = document.getElementById('car-toggle-details');
    const dillFullDetails = document.getElementById('dill-full-details');
    const enhancedDillFullDetails = document.getElementById('enhanced-dill-full-details');
    const carFullDetails = document.getElementById('car-full-details');
    
    dillToggleBtn.addEventListener('click', function() {
        const isVisible = dillFullDetails.classList.contains('details-visible');
        if (isVisible) {
            dillFullDetails.classList.remove('details-visible');
            this.innerHTML = '展开更多 <i class="fas fa-chevron-down"></i>';
        } else {
            dillFullDetails.classList.add('details-visible');
            this.innerHTML = '收起详情 <i class="fas fa-chevron-up"></i>';
        }
    });
    
    enhancedDillToggleBtn.addEventListener('click', function() {
        const isVisible = enhancedDillFullDetails.classList.contains('details-visible');
        if (isVisible) {
            enhancedDillFullDetails.classList.remove('details-visible');
            this.innerHTML = '展开更多 <i class="fas fa-chevron-down"></i>';
        } else {
            enhancedDillFullDetails.classList.add('details-visible');
            this.innerHTML = '收起详情 <i class="fas fa-chevron-up"></i>';
        }
    });
    
    carToggleBtn.addEventListener('click', function() {
        const isVisible = carFullDetails.classList.contains('details-visible');
        if (isVisible) {
            carFullDetails.classList.remove('details-visible');
            this.innerHTML = '展开更多 <i class="fas fa-chevron-down"></i>';
        } else {
            carFullDetails.classList.add('details-visible');
            this.innerHTML = '收起详情 <i class="fas fa-chevron-up"></i>';
        }
    });
    </script>
    
    <!-- 动态LOGO交互效果脚本 -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // 获取动态LOGO元素
        const dynamicLogo = document.querySelector('.dynamic-logo');
        const dynamicLogoContainer = document.querySelector('.dynamic-logo-container');
        const dynamicLogoRing = document.querySelector('.dynamic-logo-ring');
        const dynamicLogoCircle = document.querySelector('.dynamic-logo-circle');
        
        if (!dynamicLogo || !dynamicLogoContainer) return;
        
        // 添加鼠标移入暂停旋转效果
        dynamicLogoContainer.addEventListener('mouseenter', function() {
            if (dynamicLogo) {
                // 暂停主体旋转
                dynamicLogo.style.animationPlayState = 'paused';
                
                // 暂停轨道和环的旋转
                document.querySelectorAll('.dynamic-logo-orbit').forEach(orbit => {
                    orbit.style.animationPlayState = 'paused';
                });
                
                if (dynamicLogoRing) {
                    dynamicLogoRing.style.animationPlayState = 'paused';
                }
            }
        });
        
        // 添加鼠标移出继续旋转效果
        dynamicLogoContainer.addEventListener('mouseleave', function() {
            if (dynamicLogo) {
                // 恢复主体旋转
                dynamicLogo.style.animationPlayState = 'running';
                
                // 恢复轨道和环的旋转
                document.querySelectorAll('.dynamic-logo-orbit').forEach(orbit => {
                    orbit.style.animationPlayState = 'running';
                });
                
                if (dynamicLogoRing) {
                    dynamicLogoRing.style.animationPlayState = 'running';
                }
            }
        });
        
        // 添加点击时的增强3D脉冲效果
        dynamicLogoContainer.addEventListener('click', function() {
            if (dynamicLogo) {
                // 防止多次点击触发叠加效果
                if (dynamicLogo.classList.contains('pulse-effect')) {
                    return;
                }
                
                // 添加脉冲效果类
                dynamicLogo.classList.add('pulse-effect');
                
                // 获取当前3D状态并保存
                const currentTransform = getComputedStyle(dynamicLogo).transform;
                
                // 重置粒子元素，使其从当前位置开始动画
                const particles = dynamicLogo.querySelectorAll('.dynamic-logo-particle');
                particles.forEach((particle, index) => {
                    // 错开不同粒子的动画开始时间
                    setTimeout(() => {
                        particle.style.animation = `particlePulse ${0.6 + index * 0.1}s ease-in-out forwards`;
                    }, index * 50);
                });
                
                // 在动画结束后移除脉冲效果类
                setTimeout(() => {
                    dynamicLogo.classList.remove('pulse-effect');
                    
                    // 重置粒子动画
                    particles.forEach(particle => {
                        particle.style.animation = '';
                    });
                    
                    // 恢复原始3D状态，确保动画结束后不会跳动
                    dynamicLogo.style.transform = currentTransform;
                    setTimeout(() => {
                        dynamicLogo.style.transform = '';
                    }, 50);
                }, 1000);
            }
        });
    });
    </script>

    <!-- 我的工作间模态框 -->
    <div id="example-files-modal" class="example-files-modal" style="display: none;">
        <div class="example-files-modal-content">
            <div class="example-files-header">
                <h3><i class="fas fa-folder-open"></i> 我的工作间</h3>
                <button class="example-files-close" type="button">&times;</button>
            </div>
            <div class="example-files-body">
                <div class="example-files-toolbar">
                    <div class="toolbar-left">
                        <button id="refresh-files-btn" class="toolbar-btn" type="button">
                            <i class="fas fa-sync-alt"></i> 刷新
                        </button>
                        <button id="create-file-btn" class="toolbar-btn create-btn" type="button">
                            <i class="fas fa-plus"></i> 新增
                        </button>
                        <button id="upload-file-btn" class="toolbar-btn upload-btn" type="button">
                            <i class="fas fa-upload"></i> 上传
                        </button>
                        <input type="file" id="upload-file-input" style="display: none;" multiple accept=".txt,.csv,.json,.dat,.xls,.xlsx,.mat,.pli,.ldf,.msk,.int,.pro,.sim,.tab,.tsv,.asc,.lis,.log,.out,.fdt,.slf">
                    </div>
                    <div class="toolbar-right">
                        <div class="search-filter-container">
                            <div class="file-search">
                                <input type="text" id="file-search-input" placeholder="搜索文件..." class="search-input">
                                <i class="fas fa-search search-icon"></i>
                                <div class="filter-funnel-container">
                                    <button id="filter-toggle-btn" class="filter-funnel-btn" type="button" title="高级筛选">
                                        <i class="fas fa-filter" aria-hidden="true"></i>
                                        <span class="filter-count" id="filter-count" style="display: none;">0</span>
                                    </button>
                                    <div id="filter-dropdown" class="filter-dropdown" style="display: none;">
                                        <div class="filter-section">
                                            <div class="filter-header">
                                                <span>文件类型</span>
                                                <button type="button" class="clear-filter" data-filter="type">清除</button>
                                            </div>
                                            <div class="filter-options" id="type-filters">
                                                <!-- 动态生成文件类型选项 -->
                                            </div>
                                        </div>
                                        <div class="filter-section">
                                            <div class="filter-header">
                                                <span>文件大小</span>
                                                <button type="button" class="clear-filter" data-filter="size">清除</button>
                                            </div>
                                            <div class="filter-options">
                                                <label class="filter-option">
                                                    <input type="checkbox" value="small" data-filter="size">
                                                    <span>小于 1KB</span>
                                                </label>
                                                <label class="filter-option">
                                                    <input type="checkbox" value="medium" data-filter="size">
                                                    <span>1KB - 100KB</span>
                                                </label>
                                                <label class="filter-option">
                                                    <input type="checkbox" value="large" data-filter="size">
                                                    <span>大于 100KB</span>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="filter-section">
                                            <div class="filter-header">
                                                <span>扩展名</span>
                                                <button type="button" class="clear-filter" data-filter="extension">清除</button>
                                            </div>
                                            <div class="filter-options" id="extension-filters">
                                                <!-- 动态生成扩展名选项 -->
                                            </div>
                                        </div>
                                        <div class="filter-actions">
                                            <button type="button" id="clear-all-filters" class="clear-all-btn">清除所有筛选</button>
                                            <button type="button" id="apply-filters" class="apply-filters-btn">应用筛选</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="example-files-list" id="example-files-list">
                    <!-- 文件列表将在这里动态生成 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 文件预览模态框 -->
    <div id="file-preview-modal" class="file-preview-modal" style="display: none;">
        <div class="file-preview-modal-content">
            <div class="file-preview-header">
                <h3 id="preview-file-title"><i class="fas fa-file-alt"></i> 文件预览</h3>
                <div class="preview-actions">
                    <button id="edit-file-btn" class="action-btn edit-btn" type="button">
                        <i class="fas fa-edit"></i> 编辑
                    </button>
                    <button id="download-file-btn" class="action-btn download-btn" type="button">
                        <i class="fas fa-download"></i> 下载
                    </button>
                    <!-- <button id="use-file-btn" class="action-btn use-btn" type="button">
                        <i class="fas fa-check"></i> 使用此文件
                    </button> -->
                    <button class="file-preview-close" type="button">&times;</button>
                </div>
            </div>
            <div class="file-preview-body">
                <div class="file-info">
                    <span id="file-format-info" class="format-info"></span>
                    <span id="file-size-info" class="size-info"></span>
                </div>
                <div class="file-content-container">
                    <textarea id="file-content-editor" class="file-content-editor" readonly></textarea>
                </div>
                <div class="edit-actions" id="edit-actions" style="display: none;">
                    <button id="save-changes-btn" class="action-btn save-btn" type="button">
                        <i class="fas fa-save"></i> 保存更改
                    </button>
                    <button id="cancel-edit-btn" class="action-btn cancel-btn" type="button">
                        <i class="fas fa-times"></i> 取消
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 创建新文件模态框 -->
    <div id="create-file-modal" class="file-preview-modal" style="display: none;">
        <div class="file-preview-modal-content">
            <div class="file-preview-header">
                <h3><i class="fas fa-plus"></i> 创建新示例文件</h3>
                <button class="create-file-close" type="button">&times;</button>
            </div>
            <div class="file-preview-body">
                <div class="create-file-form">
                    <div class="form-group">
                        <label for="new-file-name">文件名</label>
                        <input type="text" id="new-file-name" class="form-input" placeholder="输入文件名（无需扩展名）">
                    </div>
                    <div class="form-group">
                        <label for="new-file-type">文件类型</label>
                        <select id="new-file-type" class="form-select">
                            <optgroup label="数据文件">
                                <option value="txt">TXT - 文本数据文件</option>
                                <option value="dat">DAT - 二进制数据文件</option>
                                <option value="asc">ASC - ASCII格式数据</option>
                                <option value="csv">CSV - 逗号分隔值表格</option>
                                <option value="tsv">TSV - 制表符分隔值</option>
                            </optgroup>
                            <optgroup label="配置文件">
                                <option value="json">JSON - JSON配置格式</option>
                                <option value="xml">XML - XML配置格式</option>
                            </optgroup>
                            <optgroup label="脚本文件">
                                <option value="py">Python - Python脚本</option>
                                <option value="m">MATLAB - MATLAB脚本</option>
                                <option value="js">JavaScript - JS脚本</option>
                            </optgroup>
                            <optgroup label="文档文件">
                                <option value="md">Markdown - 文档说明</option>
                                <option value="log">LOG - 日志文件</option>
                                <option value="rtf">RTF - 富文本文档</option>
                            </optgroup>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="new-file-template">选择模板</label>
                        <select id="new-file-template" class="form-select">
                            <option value="empty">空文件</option>
                            <optgroup label="光强分布模板">
                                <option value="intensity_simple">简单光强分布数据</option>
                                <option value="intensity_gaussian">高斯光强分布</option>
                                <option value="intensity_complex">复杂光强分布JSON</option>
                                <option value="sine_wave">正弦波光强分布</option>
                            </optgroup>
                            <optgroup label="表格数据模板">
                                <option value="csv_basic">基础CSV文件清单</option>
                                <option value="csv_experiment">实验数据记录表</option>
                            </optgroup>
                            <optgroup label="配置模板">
                                <option value="config_json">实验配置文件</option>
                            </optgroup>
                            <optgroup label="脚本模板">
                                <option value="python_analysis">Python数据分析脚本</option>
                                <option value="matlab_analysis">MATLAB分析脚本</option>
                            </optgroup>
                            <optgroup label="文档模板">
                                <option value="markdown_doc">Markdown实验文档</option>
                                <option value="log_experiment">实验日志模板</option>
                            </optgroup>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="new-file-content">文件内容</label>
                        <textarea id="new-file-content" class="file-content-editor" placeholder="输入文件内容"></textarea>
                    </div>
                    <div class="form-actions">
                        <button id="create-file-submit" class="action-btn save-btn" type="button">
                            <i class="fas fa-save"></i> 创建文件
                        </button>
                        <button id="create-file-cancel" class="action-btn cancel-btn" type="button">
                            <i class="fas fa-times"></i> 取消
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
</html>